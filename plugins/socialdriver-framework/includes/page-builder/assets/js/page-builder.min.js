"use strict";var deletedElement,draggedItem,percentageClass,sfTranslatedText=jQuery(".spb_translated_objects"),elements_values_array=[],currentAsset="";function spb_reorder_saved_templates(){var a=jQuery(".spb-prebuilt-pages"),e=a.children("li").get();e.sort(function(e,t){e=jQuery(e).text().toUpperCase(),t=jQuery(t).text().toUpperCase();return e<t?-1:t<e?1:0}),jQuery.each(e,function(e,t){a.append(t)})}function trackMostusedElements(e){jQuery.post(ajaxurl,{action:"spb_track_used_elements",data_element_type:e},function(e){})}function savePbHistory(e,t,a){var s=jQuery("#post").find("#post_ID").val(),l=spb_getContentFromTinyMCE();jQuery.post(ajaxurl,{action:"spb_save_pb_history",data_element:t,data_element_type:e,data_pb_content:l,data_type:a,data_page_id:s},function(e){jQuery("#dropdown-history").html(e)})}function cleaningAfterClosingElementsModal(){jQuery(".spb-elements-no-results").hide(),jQuery("#spb-option-slideout").fadeOut(300),jQuery("#spb_edit_form").fadeOut(),jQuery("#spb_edit_form").css({opacity:.8}).hide(),jQuery(".spb_elements_tabs_header").find(".active_tab").removeClass("active_tab"),jQuery("body").css("overflow",""),jQuery(".spb-content-elements").removeClass("selected"),jQuery(".spb-item-slideout").removeClass("selected"),jQuery(".spb-content-elements > li").find("a").parent().removeClass("hide-modal_elements"),jQuery("#sf_search_elements").val("")}function open_elements_dropdown(){jQuery(".spb_content_elements:first").trigger("click")}function close_elements_dropdown(){jQuery(".spb_content_elements").parents(".content-dropdown").removeClass("open"),jQuery(".spb_content_elements").removeClass("selected")}function spb_templateSystem(){jQuery(document).on("click","#spb_save_template",function(e){e.preventDefault();e='<div class="modal_wrapper"><a class="waves-effect waves-light btn modal-trigger" href="#modal-save-template"></a><div id="modal-save-template" class="modal modal_spb"><div class="modal-content">';e+="<h4>"+sfTranslatedText.attr("data-spb-save-template-header")+'</h4><div class="row"> <div class="input-field col s12"><input id="saved_template_name"  type="text" class="validate"><label for="saved_template_name">'+sfTranslatedText.attr("data-spb-save-template-msg")+"</label>",e+='</div></div><div class="modal-footer modal-save-template"><a href="#!" class=" modal-action spb-modal-close waves-effect modal-ok-button btn-flat">OK</a><a href="#!" class=" modal-action spb-modal-close waves-effect modal-cancel-button btn-flat">Cancel</a></div></div></div></div>',jQuery("#spb").append(e),jQuery("#modal-save-template").openModal();e=generateShortcodesFromHtml(jQuery(this).closest(".spb_sortable"),!0);removeClassProcessedElements(),jQuery("#modal-save-template").attr("data-element",e)}),jQuery(document).on("mouseenter",".sf_prebuilt_template",function(){jQuery(this).find("a").next().show()}),jQuery(document).on("mouseleave",".sf_prebuilt_template",function(){jQuery(this).find("a").next().hide()}),jQuery(document).on("click",".sf_prebuilt_template a",function(e){e.preventDefault();e={action:"sf_load_template",template_id:jQuery(this).attr("data-template_id")};jQuery.post(ajaxurl,e,function(e){jQuery(".spb_main_sortable").append(e).find(".spb_init_callback").each(function(){var e=window[jQuery(this).attr("value")];"function"==typeof e&&e(jQuery(this).closest(".spb_content_element"))}),initDroppable(),save_spb_html()}),cleaningAfterClosingElementsModal()}),jQuery(document).on("click",".spb_template_li a",function(e){e.preventDefault();e={action:"spb_load_template",template_id:jQuery(this).attr("data-template_id")};jQuery.post(ajaxurl,e,function(e){jQuery(".spb_main_sortable").append(e).find(".spb_init_callback").each(function(){var e=window[jQuery(this).attr("value")];"function"==typeof e&&e(jQuery(this).closest(".spb_content_element"))}),initDroppable(),save_spb_html()}),jQuery(this).parents(".custom-templates-nav").find(".dropdown").removeClass("open")}),jQuery(document).on("click",".spb_remove_template",function(e){e.preventDefault();e='<div class="modal_wrapper"><a class="waves-effect waves-light btn modal-trigger" href="#modal-delete-saved-element"></a><div id="modal-delete-saved-element" class="modal modal_spb"><div class="modal-content">';e+="<h4>"+sfTranslatedText.attr("data-spb-delete-page-template-header")+'</h4><div class="row"> <div class="input-field delete-block col s12"><label>'+sfTranslatedText.attr("data-spb-delete-saved-template-msg1")+"</label>",e+='</div></div><div class="modal-footer modal-remove-template"><a href="#!" class=" modal-action spb-modal-close waves-effect modal-ok-button btn-flat">OK</a><a href="#!" class=" modal-action spb-modal-close waves-effect modal-cancel-button btn-flat">Cancel</a></div></div></div></div>',jQuery("#spb").append(e),jQuery("#modal-delete-saved-element").openModal(),jQuery("#modal-delete-saved-element .modal-ok-button").focus(),deletedElement=jQuery(this).closest(".spb_template_li").find("a").attr("data-template_id")})}function spb_customElementSystem(){jQuery(document).on("click",".modal-cancel-button",function(e){e.preventDefault(),jQuery(".modal_wrapper").remove()}),jQuery(document).on("click",".modal-save-template .modal-ok-button",function(){var e=jQuery(".modal-content #saved_template_name").val(),t=generateShortcodesFromHtml(jQuery(".spb_main_sortable"));null!==e&&""!==e&&jQuery.post(ajaxurl,{action:"spb_save_template",template:t,template_name:e},function(e){jQuery(".spb-prebuilt-pages").html(e),spb_reorder_saved_templates(),jQuery(".spb-prebuilt-pages .spb_template_li").show()}),Materialize.toast(sfTranslatedText.attr("data-spb-saved-template"),2e3),jQuery(".modal_wrapper").remove()}),jQuery(document).on("click",".modal-delete-element .modal-ok-button",function(){var e=deletedElement.closest(".spb_sortable");0<e.parents(".spb_gmaps").length&&deletedElement.closest(".spb_sortable").parent().remove(),deletedElement.closest(".spb_sortable").remove(),e.addClass("empty_column"),save_spb_html(),e=(deletedElement=deletedElement.parent().parent().parent()).find(".el_name_holder").attr("data_default_name"),(deletedElement.hasClass("spb_row")||deletedElement.hasClass("spb_column"))&&(e=deletedElement.find(".asset-name").text()),savePbHistory(deletedElement.attr("data-element_type"),e,"Deleted"),Materialize.toast(sfTranslatedText.attr("data-spb-deleted-element"),2e3),jQuery(".modal_wrapper").remove(),deletedElement=null}),jQuery(document).on("click",".modal-delete-page-builder-content .modal-ok-button",function(){!0!==isTinyMceActive()?jQuery("#content").val(""):tinyMCE.activeEditor.setContent(""),jQuery("#spb_content").find(".spb_sortable").remove(),jQuery("#spb_content").find(".new_sortable_element").remove(),jQuery("#spb_content").find(".newtop_sortable_element").remove(),save_spb_html(),jQuery(".modal-delete-page-builder-content").remove(),Materialize.toast(sfTranslatedText.attr("data-spb-deleted-pb-content"),2e3),jQuery(".modal_wrapper").remove()}),jQuery(document).on("click",".modal-delete-saved-element .modal-ok-button",function(){var e={action:"spb_delete_element",element_id:deletedElement.closest(".spb_elements_li").find("a").attr("data-element_id")};jQuery.post(ajaxurl,e,function(e){jQuery(".spb-content-elements-saved").html(e),setTimeout(Materialize.toast(sfTranslatedText.attr("data-spb-deleted-element"),1500),2e3)})}),jQuery(document).on("click",".modal-save-element .modal-ok-button",function(){var e,t=jQuery(".modal-content #saved_element_name").val();null!==t&&""!==t&&(e=jQuery("#modal-save-element").attr("data-element"),jQuery.post(ajaxurl,{action:"spb_save_element",element:e,element_name:t},function(e){jQuery(".spb-content-elements-saved").html(e)})),jQuery("#modal-save-element").remove(),Materialize.toast(sfTranslatedText.attr("data-spb-saved-element"),2e3),jQuery(".modal_wrapper").remove()}),jQuery(document).on("click",".modal-save-element .modal-cancel-button",function(e){e.preventDefault(),jQuery(".modal-content #saved_element_name").val(""),jQuery(".modal-content #saved_element_name").focusout()}),jQuery(document).on("click",".element-save",function(e){e.preventDefault();e='<div class="modal_wrapper"><a class="waves-effect waves-light btn modal-trigger" href="#modal-save-element"></a><div id="modal-save-element" class="modal modal_spb"><div class="modal-content">';e+="<h4>"+sfTranslatedText.attr("data-spb-save-element-header")+'</h4><div class="row"> <div class="input-field col s12"><input id="saved_element_name"  type="text" class="validate"><label for="first_name">'+sfTranslatedText.attr("data-spb-save-element-msg")+"</label>",e+='</div></div><div class="modal-footer modal-save-element"><a href="#!" class=" modal-action spb-modal-close waves-effect modal-ok-button btn-flat">OK</a><a href="#!" class=" modal-action spb-modal-close waves-effect modal-cancel-button btn-flat">Cancel</a></div></div></div></div>',jQuery("#spb").append(e),jQuery("#modal-save-element").openModal();e=generateShortcodesFromHtml(jQuery(this).closest(".spb_sortable"),!0);removeClassProcessedElements(),jQuery("#modal-save-element").attr("data-element",e)}),jQuery(document).on("click",".spb_elements_li a",function(e){e.preventDefault();e={action:"spb_load_element",element_id:jQuery(this).attr("data-element_id")};jQuery.post(ajaxurl,e,function(e){""===currentAsset&&(currentAsset=".spb_main_sortable"),jQuery(currentAsset).append(e).find(".spb_init_callback").each(function(){var e=window[jQuery(this).attr("value")];"function"==typeof e&&e(jQuery(this).closest(".spb_content_element"))}),currentAsset="",save_spb_html()}),cleaningAfterClosingElementsModal()}),jQuery(document).on("click",".spb_remove_element",function(e){e.preventDefault();e='<div class="modal_wrapper"><a class="waves-effect waves-light btn modal-trigger" href="#modal-delete-saved-element">Modal</a><div id="modal-delete-saved-element" class="modal modal_spb"><div class="modal-content">';e+="<h4>"+sfTranslatedText.attr("data-spb-delete-saved-element-header")+'</h4><div class="row"> <div class="input-field delete-block col s12"><label>'+sfTranslatedText.attr("data-spb-delete-saved-element-msg1")+"</label>",e+='</div></div><div class="modal-footer modal-delete-saved-element"><a href="#!" class=" modal-action spb-modal-close waves-effect modal-ok-button btn-flat">OK</a><a href="#!" class=" modal-action spb-modal-close waves-effect modal-cancel-button btn-flat">Cancel</a></div></div></div></div>',jQuery("#spb").append(e),jQuery("#modal-delete-saved-element").openModal(),deletedElement=jQuery(this)})}!function(i){i.log=function(e){void 0!==window.console&&console.log(e)},i.swift_page_builder={isMainContainerEmpty:function(){jQuery(".spb_main_sortable > div").length?i(".metabox-builder-content").removeClass("empty-builder"):i(".metabox-builder-content").addClass("empty-builder")},cloneSelectedImagesFromMediaTab:function(e){var t=i(".spb_current_active_media_button").removeClass(".spb_current_active_media_button").next(),a=t.prev().prev(),t=t.find(".sf_gallery_widget_attached_images_list");t.html(e);var s="";t.find("li").each(function(){s+=(0<s.length?",":"")+i(this).attr("media_id")}),a.val(s),attachedImgSortable(t),tb_remove()},galleryImagesControls:function(){i(document).on("click","#spb .sf_gallery_widget_add_images",function(e){e.preventDefault();var t="",a=i(this).parent().find(".attach_image"),s=i(this).parent().find(".sf_gallery_widget_attached_images_list");t||(t=wp.media.frames.file_frame=wp.media({title:jQuery(this).data("uploader_title"),button:{text:jQuery(this).data("uploader_button_text")},multiple:!1})).on("select",function(){var e=t.state().get("selection").first().toJSON();return a.val(e.id),s.empty(),s.append('<li class="added" media_id="'+e.id+'"><img src="'+e.sizes.thumbnail.url+'" alt="" rel="'+e.id+'"><div class="sf-close-image-bar"><a title="Deselect" class="sf-close-delete-file" href="#">×</a></div></li>'),jQuery(".sf-close-delete-file").click(function(e){return e.preventDefault(),jQuery(this).parent().parent().remove(),jQuery(".sf_gallery_widget_attached_images_ids").val(""),!1}),!1}),t.open()}),i(".gallery_widget_img_select li").on("click",function(){i(this).toggleClass("added");var e=i(this).parent().parent().prev().prev().prev(),t=0<e.val().length?e.val().split(","):[],a=i(this).find("img").attr("rel"),s=i.inArray(a,t);-1==s?t.push(a):t.splice(s,1),e.val(t.join(","))})},initializeFormEditing:function(t){removeClassProcessedElements(),i("#spb_edit_form .wp-editor-wrap .textarea_html").each(function(){initTinyMce(i(this))});var e,a,s,l=800;jQuery("#spb .custom_css_percentage").is(":checked")&&(l=20),jQuery("#padding_vertical, #padding_vertical_val, #padding_horizontal, #padding_horizontal_val, #margin_vertical, #margin_vertical_val ").attr("max",l),"spb_text_block"==t.attr("data-element_type")&&(a=t.find(".padding_vertical"),e=t.find(".padding_horizontal"),0<a.val()&&(""==jQuery(".spb_edit_form_elements .custom-padding-top").val()&&jQuery(".spb_edit_form_elements .custom-padding-top").val(a.val()),""==jQuery(".spb_edit_form_elements .custom-padding-bottom").val()&&jQuery(".spb_edit_form_elements .custom-padding-bottom").val(a.val())),0<e.val()&&""==jQuery(".spb_edit_form_elements .custom-padding-left").val()&&(""==jQuery(".spb_edit_form_elements .custom-padding-left").val()&&jQuery(".spb_edit_form_elements .custom-padding-left").val(e.val()),""==jQuery(".spb_edit_form_elements .custom-padding-right").val()&&jQuery(".spb_edit_form_elements .custom-padding-right").val(e.val()))),"spb_column"==t.attr("data-element_type")&&(e=t.find(".padding_horizontal").last(),a=t.find(".padding_vertical").last(),l=20,jQuery("#col_el_class").parent().parent().parent().hide(),jQuery(".col_sm").attr("disabled","disabled"),setTimeout(function(){jQuery("#col_padding_val").parent().parent().parent().hide(),0<parseInt(jQuery("#col_padding_val").val())&&(e.val(parseInt(jQuery("#col_padding_val").val())),a.val(parseInt(jQuery("#col_padding_val").val())),jQuery("#col_padding_val").val(0),jQuery("#col_padding").val(0),jQuery("#padding_horizontal").attr("max",l),jQuery("#padding_horizontal_val").attr("max",l),jQuery("#padding_vertical").attr("max",l),jQuery("#padding_vertical_val").attr("max",l),jQuery("#spb_edit_form .custom_css_percentage").attr("checked","checked"),jQuery(".custom-padding-bottom").val(e.val()),jQuery(".custom-padding-top").val(e.val()),jQuery(".custom-padding-left").val(e.val()),jQuery(".custom-padding-right").val(e.val())),jQuery("#col_padding").attr("disabled","disabled"),jQuery("#padding_horizontal_val").attr("value",e.val()),jQuery("#padding_horizontal").attr("value",e.val()),jQuery("#padding_vertical_val").attr("value",a.val()),jQuery("#padding_vertical").attr("value",a.val())},100)),"spb_row"==t.attr("data-element_type")&&(jQuery("#row_el_class").parent().parent().parent().hide(),e=t.find(".row_padding_horizontal"),a=t.find(".row_padding_vertical"),n=t.find(".row_margin_vertical"),l=800,s=t.find(".row_el_class").val(),e.val(Math.round(e.val())),a.val(Math.round(a.val())),n.val(Math.round(n.val())),""!=s&&(jQuery("#row_el_class").val(""),jQuery("#el_class").val(s)),jQuery("#row_margin_vertical_val").attr("disabled","disabled"),jQuery("#row_padding_horizontal_val").attr("disabled","disabled"),jQuery("#row_padding_vertical_val").attr("disabled","disabled"),jQuery("#row_margin_vertical").attr("disabled","disabled"),jQuery("#row_padding_horizontal").attr("disabled","disabled"),jQuery("#row_padding_vertical").attr("disabled","disabled"),jQuery("#row_padding_vertical").prev().css("background-color","#ccc"),jQuery("#row_padding_horizontal").prev().css("background-color","#ccc"),jQuery("#row_margin_vertical").prev().css("background-color","#ccc"),0<e.val()&&(""==jQuery(".spb_edit_form_elements .custom-padding-left").val()&&""==jQuery(".spb_edit_form_elements .custom-padding-right").val()&&(s=e.val()/20*100,s=l*s/100,jQuery("#padding_horizontal_val").val(s),jQuery("#padding_horizontal").val(s),e=jQuery("#padding_horizontal_val")),""==jQuery(".spb_edit_form_elements .custom-padding-left").val()&&jQuery(".spb_edit_form_elements .custom-padding-left").val(e.val()),""==jQuery(".spb_edit_form_elements .custom-padding-right").val()&&jQuery(".spb_edit_form_elements .custom-padding-right").val(e.val())),0<a.val()&&(jQuery("#padding_vertical_val").val(a.val()),jQuery("#padding_vertical").val(a.val()),""==jQuery(".spb_edit_form_elements .custom-padding-bottom").val()&&jQuery(".spb_edit_form_elements .custom-padding-bottom").val(a.val()),""==jQuery(".spb_edit_form_elements .custom-padding-top").val()&&jQuery(".spb_edit_form_elements .custom-padding-top").val(a.val())),0<n.val()&&(jQuery("#margin_vertical_val").val(n.val()),jQuery("#margin_vertical").val(n.val()),""==jQuery(".spb_edit_form_elements .custom-margin-bottom").val()&&jQuery(".spb_edit_form_elements .custom-margin-bottom").val(n.val()),""==jQuery(".spb_edit_form_elements .custom-margin-top").val()&&jQuery(".spb_edit_form_elements .custom-margin-top").val(n.val()))),i(".spb-colorpicker").minicolors(),0<i(".noUiSlider").length&&i(".noUiSlider").each(function(){var e=i(this),t=e.next("input.spb-uislider"),a=parseInt(t.val(),10),s=parseFloat(t.data("step")),l=parseFloat(t.data("min")),n=parseFloat(t.data("max"));e.noUiSlider({range:{min:l,max:n},start:[a],handles:1,step:s,format:wNumb({decimals:0,thousand:"",postfix:""})}),e.Link("lower").to(t)}),0<i(".spb-buttonset").length&&i(".spb-buttonset").each(function(){var e=i(this);e.find(".buttonset-item,.ui-button").button(),e.buttonset()}),0<i(".icon-picker").length&&i(".icon-picker").each(function(){i(this).val(),i(this).parent().find(".font-icon-grid")}),i(".font-icon-grid.std-grid").on("click","li",function(){var e=i(this),t="";t=(t=""===(t=e.hasClass("svg-icon")?e.data("path"):e.find("i").attr("class"))?e.find("i").attr("class"):t)||e.data("icon"),i(".font-icon-grid li").removeClass("selected"),e.addClass("selected"),e.parent().parent().find("input").val(t),e.parent().parent().find("input").not(".search-icon-grid").val(t)}),i(document).on("click",".section_add_icon",function(){jQuery(this).parent().parent().find(".font-icon-grid").show()}),i(document).on("click",".section_icon_image",function(){jQuery(this).parent().parent().find(".font-icon-grid").show()}),i(document).on("click",".font-icon-grid.repeater-grid li",function(){var e=i(this),t="";""===(t=""===(t=e.hasClass("svg-icon")?e.data("path"):e.find("i").attr("class"))?e.find("i").attr("class"):t)&&(t=e.find("i").data("icon")),e.parent().parent().find(".icon_field_value").val(t);var a=jQuery(this).find("i").clone();e.parent().parent().find(".section_icon_image").html(a),e.parent().parent().find(".section_icon_image > i").attr("data-path",t),jQuery(this).parent().hide(),e.parent().parent().find(".section_icon_image").show()});var n=t.children(".spb_edit_callback");return 1==n.length&&window[n.attr("value")],i(".spb_save_edit_form").unbind("click").click(function(e){e.preventDefault(),removeClassProcessedElements(),saveFormEditing(t)}),i("#cancel-background-options").unbind("click").click(function(e){e.preventDefault(),jQuery("body").css("overflow",""),i(".spb_tinymce").each(function(){4<=tinyMCE.majorVersion?tinyMCE.execCommand("mceRemoveEditor",!0,i(this).attr("id")):tinyMCE.execCommand("mceRemoveControl",!0,i(this).attr("id"))}),i("#spb_edit_form").html("").fadeOut(),i("#publish").show()}),jQuery("#spb_edit_form").find(".spb_param_value.caption").parent().parent().hide(),n=i(".spb_edit_wrap"),i(".mce-statusbar"),i(".mce-edit-area"),i(".mce-toolbar-grp"),i(".mce-toolbar-grp"),n.scroll(function(){})},onDragPlaceholder:function(){return i('<div id="drag_placeholder"></div>')},addLastClass:function(e){var t=0,a=0,e=i(e);e.children(".spb_sortable").removeClass("spb_first spb_last"),e.hasClass("spb_main_sortable")&&(e.find(".spb_sortable .spb_sortable").removeClass("sortable_1st_level"),e.children(".spb_sortable").addClass("sortable_1st_level"),e.children(".spb_sortable:eq(0)").addClass("spb_first"),e.children(".spb_sortable:last").addClass("spb_last")),e.hasClass("spb_column_container")&&(e.children(".spb_sortable:eq(0)").addClass("spb_first"),e.children(".spb_sortable:last").addClass("spb_last")),e.children(".spb_sortable").each(function(){var e=i(this);e.hasClass("span12")||e.hasClass("spb_widget")?a=12:e.hasClass("span10")?a=10:e.hasClass("span9")?a=9:e.hasClass("span8")?a=8:e.hasClass("span6")?a=6:e.hasClass("span4")?a=4:e.hasClass("span3")?a=3:e.hasClass("span2")&&(a=2),10<(t+=a)&&t<=12&&(e.addClass("spb_last"),e.next(".spb_sortable").addClass("spb_first"),t=0),12<t&&(e.addClass("spb_first"),e.prev(".spb_sortable").addClass("spb_last"),t=a),(e.hasClass("spb_column")||e.hasClass("spb_row")||e.hasClass("spb_tabs")||e.hasClass("spb_tour")||e.hasClass("spb_gmaps")||e.hasClass("spb_accordion"))&&(0<e.find(".spb_element_wrapper .spb_column_container").length?(e.removeClass("empty_column"),e.addClass("not_empty_column"),e.find(".spb_element_wrapper .spb_column_container").each(function(){i.swift_page_builder.addLastClass(i(this)),0===i(this).find("div:not(.container-helper)").length?(i(this).addClass("empty_column"),i(this).html(i("#container-helper-block").html())):i(this).find(".container-helper").each(function(){var e=jQuery(this);e.appendTo(e.parent())})})):0===e.find(".spb_element_wrapper .spb_column_container").length?(e.removeClass("not_empty_column"),e.addClass("empty_column")):e.removeClass("empty_column not_empty_column"))})},save_spb_html:function(){this.addLastClass(i(".spb_main_sortable"));var e=generateShortcodesFromHtml(i(".spb_main_sortable"));removeClassProcessedElements(),!0!==isTinyMceActive()?i("#content").val(e):tinyMCE.get("content").setContent(e,{format:"html"})}}}(jQuery),jQuery(document).ready(function(s){var t,a,e,l,n;function i(e){var a=s("."+e),e=a.children("li").get();e.sort(function(e,t){e=s(e).text().toUpperCase(),t=s(t).text().toUpperCase();return e<t?-1:t<e?1:0}),s.each(e,function(e,t){a.append(t)})}spb_reorder_saved_templates(),spb_templateSystem(),spb_customElementSystem(),jQuery(document).on("click",".ui-tabs-nav .edit_tab",function(){return showEditSmallForm(jQuery(this)),!1}),jQuery(document).on("change","#padding_vertical",function(){jQuery(".spb_edit_form_elements .custom-padding-top").val(jQuery(this).val()),jQuery(".spb_edit_form_elements .custom-padding-bottom").val(jQuery(this).val())}),jQuery(document).on("change","#padding_horizontal",function(){jQuery(".spb_edit_form_elements .custom-padding-left").val(jQuery(this).val()),jQuery(".spb_edit_form_elements .custom-padding-right").val(jQuery(this).val())}),jQuery(document).on("change","#margin_vertical",function(){jQuery(".spb_edit_form_elements .custom-margin-top").val(jQuery(this).val()),jQuery(".spb_edit_form_elements .custom-margin-bottom").val(jQuery(this).val())}),jQuery(document).on("change","#border_size",function(){jQuery(".spb_edit_form_elements .custom-border-top").val(jQuery(this).val()),jQuery(".spb_edit_form_elements .custom-border-bottom").val(jQuery(this).val()),jQuery(".spb_edit_form_elements .custom-border-left").val(jQuery(this).val()),jQuery(".spb_edit_form_elements .custom-border-right").val(jQuery(this).val())}),jQuery(document).on("change","#spb .custom_css_percentage",function(){var e=jQuery(this).is(":checked")?"20":"800",t=jQuery("#padding_vertical_val").val()/jQuery("#padding_vertical_val").attr("max")*100,a=e*t/100;jQuery("#padding_vertical").attr("max",e),jQuery("#padding_vertical_val").attr("max",e),jQuery("#padding_vertical").val(a),jQuery("#padding_vertical_val").val(a),jQuery("#padding_vertical").trigger("change"),a=e*(jQuery("#padding_horizontal_val").val()/jQuery("#padding_horizontal_val").attr("max")*100)/100,jQuery("#padding_horizontal").attr("max",e),jQuery("#padding_horizontal_val").attr("max",e),jQuery("#padding_horizontal").val(a),jQuery("#padding_horizontal_val").val(a),jQuery("#padding_horizontal").trigger("change"),a=e*(jQuery("#margin_vertical_val").val()/jQuery("#margin_vertical_val").attr("max")*100)/100,a=Math.round(a),jQuery("#margin_vertical").attr("max",e),jQuery("#margin_vertical_val").attr("max",e),jQuery("#margin_vertical").val(a),jQuery("#margin_vertical_val").val(a),jQuery("#margin_vertical").trigger("change"),a=e*(jQuery(".custom-padding-bottom").val()/jQuery("#padding_vertical_val").attr("max")*100)/100,jQuery(".custom-padding-bottom").val(Math.round(a)),a=e*(jQuery(".custom-padding-top").val()/jQuery("#padding_vertical_val").attr("max")*100)/100,jQuery(".custom-padding-top").val(Math.round(a)),a=e*(jQuery(".custom-padding-left").val()/jQuery("#padding_horizontal_val").attr("max")*100)/100,jQuery(".custom-padding-left").val(Math.round(a)),a=e*(jQuery(".custom-padding-right").val()/jQuery("#padding_horizontal_val").attr("max")*100)/100,jQuery(".custom-padding-right").val(Math.round(a)),a=e*(jQuery(".custom-margin-bottom").val()/jQuery("#margin_vertical_val").attr("max")*100)/100,jQuery(".custom-margin-bottom").val(Math.round(a)),a=e*(jQuery(".custom-margin-top").val()/jQuery("#margin_vertical_val").attr("max")*100)/100,jQuery(".custom-margin-top").val(Math.round(a))}),jQuery(document).on("change","#spb .simplified_controls",function(){detailedControls(jQuery(this))}),jQuery(document).on("input",".custom-margin",function(){jQuery(".lb_css_field .cm-global").val(jQuery(this).val())}),jQuery(document).on("input",".custom-border",function(){jQuery(".lb_css_field .cb-global").val(jQuery(this).val())}),jQuery(document).on("input",".custom-padding",function(){jQuery(".lb_css_field .cp-global").val(jQuery(this).val())}),jQuery(document).on("click",".ui-tabs-nav .delete_tab",function(e){e.preventDefault();var t=sfTranslatedText.attr("data-spb-delete-tabs-section-q1"),e='<div class="modal_wrapper"><a class="waves-effect waves-light btn modal-trigger" href="#modal-delete"></a><div id="modal-delete-tab" class="modal modal_spb"><div class="modal-content">';return e+="<h4>"+sfTranslatedText.attr("data-spb-delete-tabs-header")+'</h4><div class="row"> <div class="input-field delete-block col s12"><label>'+t+"</label>",e+='</div></div><div class="modal-footer modal-delete-tab"><a href="#!" class=" modal-action spb-modal-close waves-effect modal-ok-button btn-flat">OK</a><a href="#!" class=" modal-action spb-modal-close waves-effect modal-cancel-button btn-flat">Cancel</a></div></div></div></div>',jQuery("#spb").append(e),jQuery("#modal-delete-tab").openModal(),deletedElement=jQuery(this),!1}),jQuery(document).on("click",".tabs_expanded_helper .add_tab, .add-pin-to-map, .add-parallax-layer",function(e){e.preventDefault();var t=jQuery(this).closest(".spb_sortable").hasClass("spb_tour")?"Slide":"Tab",a=jQuery(this).parent().parent().parent().find(".ui-tabs-nav li").length+1,s=jQuery(this).parent().parent().parent().parent().find(".spb_tabs_holder"),l=s.find(".ui-tabs-nav"),e="";return jQuery(this).parent().hide(),jQuery(this).parent().parent().find(".container-helper").show(),jQuery(this).closest(".spb_sortable").hasClass("spb_gmaps")&&(t="Pin",a=jQuery(this).parent().parent().find(".spb_map_pin").length+1),jQuery(this).closest(".spb_sortable").hasClass("spb_multilayer_parallax")&&(t="Layer",a=jQuery(this).parent().parent().find(".spb_multilayer_parallax_layer").length+1),jQuery(this).closest(".spb_sortable").hasClass("spb_tour")?(e="Tour Tab",l.append('<li class="ui-state-default ui-corner-top" role="tab" tabindex="-1" aria-controls="tab-'+a+'" aria-labelledby="ui-id-'+a+'" aria-selected="false" style="top: 0px;"><a href="#tab-'+a+'" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-'+a+'"><span>'+t+" "+a+'</span></a><a class="delete_tab"></a><a class="edit_tab"></a></li>'),s.append('<div id="tab-'+a+'" class="row-fluid spb_column_container spb_sortable_container not-column-inherit ui-sortable ui-droppable ui-tabs-panel ui-widget-content ui-corner-bottom spb-dont-resize" aria-labelledby="ui-id-'+a+'" role="tabpanel" aria-expanded="true" aria-hidden="false"><div data-element_type="spb_text_block" class="spb_text_block spb_content_element spb_sortable span12 spb_first spb_last ui-sortable-helper"><input type="hidden" class="spb_sc_base" name="element_name-spb_text_block" value="spb_text_block"><div class="controls sidebar-name"> <div class="column_size_wrapper"> <a class="column_decrease" href="#" title="Decrease width"></a> <span class="column_size">1/1</span> <a class="column_increase" href="#" title="Increase width"></a> </div><div class="controls_right"> <a class="column_popup" href="#" title="Pop up"></a><a class="column_edit" href="#" title="Edit"><span class="icon-edit"></span></a> <a class="column_clone" href="#" title="Clone"></a> <a class="column_delete" href="#" title="Delete"></a></div></div><div class="spb_element_wrapper clearfix"><input type="hidden" class="spb_param_value title textfield " name="title" value=""><input type="hidden" class="spb_param_value icon textfield " name="icon" value=""><div class="spb_param_value holder content textarea_html " name="content"><p> This is a text block. Click the edit button to change this text. </p></div><input type="hidden" class="spb_param_value pb_margin_bottom dropdown " name="pb_margin_bottom" value="no"><input type="hidden" class="spb_param_value pb_border_bottom dropdown " name="pb_border_bottom" value="no"><input type="hidden" class="spb_param_value el_class textfield " name="el_class" value=""></div> \x3c!-- end .spb_element_wrapper --\x3e</div> \x3c!-- end #element-spb_text_block --\x3e</div>')):jQuery(this).closest(".spb_sortable").hasClass("spb_gmaps")?(e="Map Pin",s=jQuery(this).parent().parent().parent().find(".spb_tabs_holder"),l.append('<li class="ui-state-default ui-corner-top" role="tab" tabindex="-1" aria-controls="tab-'+a+'" aria-labelledby="ui-id-'+a+'" aria-selected="false" style="top: 0px;"><a href="#tab-'+a+'" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-'+a+'"><span>'+t+" "+a+"</span></a></li>"),s.append('<div class="row-fluid spb_column_container map_pin_wrapper not-column-inherit not-sortable"><div data-element_type="spb_map_pin" class="spb_map_pin spb_content_element spb_sortable span12 spb_first spb_last"><input type="hidden" class="spb_sc_base" name="element_name-spb_map_pin" value="spb_map_pin"><div class="spb_element_wrapper  over_element_wrapper"><div class="spb_elem_controls" style="display: none;"><a class="column_delete" href="#" title="Delete"><span class="icon-delete"></span></a><a class="element-save" href="#" title="Save"><span class="icon-save"></span></a><a class="column_clone" href="#" title="Duplicate"><span class="icon-duplicate"></span></a><a class="column_edit" href="#" title="Edit"><span class="icon-edit"></span></a></div><div class="icon_holder"><span class="icon-map"></span></div><div class="el_name_holder" data_default_name="'+e+'">'+e+'</div><div class="el_name_editor"><input name="el_name_editor" type="text" class="validate textfield" value="Map Pin"><a class="el-name-save" href="#" title="Save"><span class="icon-save"></span></a></div><input type="hidden" class="spb_param_value general_tab section_tab " name="general_tab" value=""><input type="hidden" class="spb_param_value element_name textfield " name="element_name" value=""><input type="hidden" class="spb_param_value pin_title textfield " name="pin_title" value="First Pin"><input type="hidden" class="spb_param_value address textfield " name="address" value="Click the edit button to change the map pin details."><input type="hidden" class="spb_param_value pin_latitude textfield " name="pin_latitude" value=""><input type="hidden" class="spb_param_value pin_longitude textfield " name="pin_longitude" value=""><input type="hidden" class="spb_param_value pin_image attach_image " name="pin_image" value=""><input type="hidden" class="spb_param_value pin_link textfield " name="pin_link" value=""><input type="hidden" class="spb_param_value pin_button_text textfield " name="pin_button_text" value=""><div class="spb_param_value holder content textarea_html hide-shortcode" name="content">This is a map pin. Click the edit button to change it.</div></div> \x3c!-- end .spb_element_wrapper --\x3e \x3c!-- end #element-spb_map_pin --\x3e</div></div>')):jQuery(this).closest(".spb_sortable").hasClass("spb_multilayer_parallax")?(e="Multilayer Parallax Layer",l.append('<li class="ui-state-default ui-corner-top" role="tab" tabindex="-1" aria-controls="tab-'+a+'" aria-labelledby="ui-id-'+a+'" aria-selected="false" style="top: 0px;"><a href="#tab-'+a+'" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-'+a+'"><span>'+t+" "+a+"</span></a></li>"),s.append('<div class="row-fluid spb_column_container not-column-inherit not-sortable"><div data-element_type="spb_multilayer_parallax_layer" class="spb_multilayer_parallax_layer spb_content_element spb_sortable span12"><input type="hidden" class="spb_sc_base" name="element_name-spb_multilayer_parallax_layer" value="spb_multilayer_parallax_layer"><div class="controls sidebar-name"><div class="controls_right" style="display: block;"> <a class="column_edit" href="#" title="Edit"><span class="icon-edit"></span></a><a class="column_delete" href="#" title="Delete"><span class="icon-delete"></span></a></div></div><div class="spb_element_wrapper over_element_wrapper"><div class="spb_elem_controls" style="display: none;"><a class="column_delete" href="#" title="Delete"><span class="icon-delete"></span></a><a class="element-save" href="#" title="Save"><span class="icon-save"></span></a><a class="column_clone" href="#" title="Duplicate"><span class="icon-duplicate"></span></a><a class="column_edit" href="#" title="Edit"><span class="icon-edit"></span></a></div><div class="icon_holder"><span class="spb_multilayer_parallax_layer"></span></div><div class="el_name_holder" data_default_name="'+e+'">'+e+'</div><div class="el_name_editor"><input type="hidden" class="spb_param_value layer_title textfield " name="layer_title" value=""><input name="el_name_editor" type="text" class="validate textfield" value="'+e+' "><a class="el-name-save" href="#" title="Save"><span class="icon-save"></span></a></div><input type="hidden" class="spb_param_value general_tab section_tab " name="general_tab" value=""><input type="hidden" class="spb_param_value element_name textfield " name="element_name" value=""><input type="hidden" class="spb_param_value layer_title textfield " name="layer_title" value=""><input type="hidden" class="spb_param_value layer_image attach_image " name="layer_image" value=""><img width="66" height="66" src="'+jQuery(this).closest(".spb_sortable").attr("data-content-url")+'" class="attachment-thumbnail" alt="" title=""><a href="#" class="column_edit_trigger image-exists"><i class="spb-icon-single-image"></i>No image yet! Click here to select it now.</a><input type="hidden" class="spb_param_value layer_type dropdown " name="layer_type" value="original"><input type="hidden" class="spb_param_value layer_bg_pos dropdown " name="layer_bg_pos" value="center_center"><input type="hidden" class="spb_param_value layer_bg_repeat dropdown " name="layer_bg_repeat" value="no-repeat"><input type="hidden" class="spb_param_value layer_depth dropdown " name="layer_depth" value="0.00"><input type="hidden" class="spb_param_value section_misc_options section " name="section_misc_options" value=""><input type="hidden" class="spb_param_value text_layer buttonset " name="text_layer" value="no"><input type="hidden" class="spb_param_value content textarea_html " name="content" value=""></div> \x3c!-- end .spb_element_wrapper --\x3e</div> \x3c!-- end #element-spb_multilayer_parallax_layer --\x3e</div></div>')):(e="Tab",l.append('<li class="ui-state-default ui-corner-top" role="tab" tabindex="-1" aria-controls="tab-'+a+'" aria-labelledby="ui-id-'+a+'" aria-selected="false" style="top: 0px;"><a href="#tab-'+a+'" class="ui-tabs-anchor" role="presentation" tabindex="-1" id="ui-id-'+a+'"><span>'+t+" "+a+'</span></a><a class="edit_tab"><span class="icon-edit"></span></a></a><a class="delete_tab"><span class="icon-delete"></span></a></li>'),s.append('<div id="tab-'+a+'" class="row-fluid spb_column_container spb_sortable not-column-inherit not-sortable ui-sortable ui-droppable ui-tabs-panel ui-widget-content ui-corner-bottom spb-dont-resize" aria-labelledby="ui-id-'+a+'" role="tabpanel" aria-expanded="false" aria-hidden="true" style="display: none;"><div data-element_type="spb_text_block" class="spb_text_block spb_content_element spb_sortable span12 sortable_1st_level spb_last spb_first"><input type="hidden" class="spb_sc_base" name="element_name-spb_text_block" value="spb_text_block"><div class="spb_element_wrapper clearfix over_element_wrapper"><div class="spb_elem_controls" style="display: none;"><a class="column_delete" href="#" title="Delete"><span class="icon-delete"></span></a><a class="element-save" href="#" title="Save"><span class="icon-save"></span></a><a class="column_clone" href="#" title="Duplicate"><span class="icon-duplicate"></span></a><a class="column_edit" href="#" title="Edit"><span class="icon-edit"></span></a></div><div class="controls sidebar-name"> <div class="column_size_wrapper" style="display: none;"> <a class="column_decrease" href="#" title="Decrease width"></a> <span class="column_size">1/1</span> <a class="column_increase" href="#" title="Increase width"></a> </div><div class="controls_right" style="display: block;"> <a class="element-save" href="#" title="Save"><span class="icon-save"></span></a> <a class="column_edit" href="#" title="Edit"><span class="icon-edit"></span></a> <a class="column_clone" href="#" title="Clone"><span class="icon-duplicate"></span></a> <a class="column_delete" href="#" title="Delete"></a></div></div><div class="spb_elem_handles"><i class="fa-chevron-left"></i><i class="fa-chevron-right"></i></div><div class="icon_holder"><span class="icon-text-block"></span></div><div class="el_name_holder" data_default_name="Text Block">Text Block</div><div class="el_name_editor"><input name="el_name_editor" type="text" value="Text Block "><a class="el-name-save" href="#" title="Save"><span class="icon-save"></span></a></div><input type="hidden" class="spb_param_value general_tab section_tab " name="general_tab" value=""><input type="hidden" class="spb_param_value element_name textfield " name="element_name" value=""><div class="spb_param_value holder title textfield " name="title"></div><input type="hidden" class="spb_param_value icon textfield " name="icon" value=""><div class="spb_param_value holder content textarea_html " name="content"><p>This is a text block. Click the edit button to change this text.</p></div><input type="hidden" class="spb_param_value tb_animation_options section " name="tb_animation_options" value=""><input type="hidden" class="spb_param_value animation dropdown " name="animation" value="none"><input type="hidden" class="spb_param_value animation_delay textfield " name="animation_delay" value="0"><input type="hidden" class="spb_param_value tb_styling_options section " name="tb_styling_options" value=""><input type="hidden" class="spb_param_value padding_vertical uislider " name="padding_vertical" value="0"><input type="hidden" class="spb_param_value padding_horizontal uislider " name="padding_horizontal" value="0"><input type="hidden" class="spb_param_value form_content textfield " name="form_content" value=""><input type="hidden" class="spb_param_value el_class textfield " name="el_class" value=""></div> \x3c!-- end .spb_element_wrapper --\x3e</div><div class="tabs_expanded_helper"><a href="#" class="add_element"><span class="icon-add"></span>Add Element</a><a href="#" class="add_tab"><span class="icon-add-tab"></span>Add Tab</a></div><div class="container-helper"><a href="#" class="add-element-to-column btn-floating waves-effect waves-light"><span class="icon-add"></span></a></div>')),jQuery(this).closest(".spb_sortable").hasClass("spb_gmaps")||jQuery(this).closest(".spb_sortable").hasClass("spb_multilayer_parallax")||jQuery(this).parent().parent().parent().tabs("refresh"),initDroppable(),save_spb_html(),savePbHistory("",e,"Added"),!1}),jQuery(document).on("click","#dropdown-history li a",function(e){e.preventDefault(),!0!==isTinyMceActive()?jQuery("#content").val(stripslashes(jQuery(this).attr("data-revision-value"))):tinyMCE.activeEditor.setContent(stripslashes(jQuery(this).attr("data-revision-value"))),jQuery("#spb-empty").hide(),spb_shortcodesToBuilder(!0)}),jQuery(document).on("click",".tabs_expanded_helper .add_section",function(e){e.preventDefault();var t=jQuery(this).parent().parent().parent().parent().parent(),e=t.find(".group").length+1,e='<div class="group"><h3 class="ui-accordion-header ui-state-default ui-corner-all  ui-sortable-handle" role="tab" id="ui-id-9" aria-controls="ui-id-'+e+'" aria-selected="false" aria-expanded="false" tabindex="-1"><a class="title-text" href="#section-'+e+'" id="section-'+e+'">Section '+e+'</a><div class="accordion_holder"><a class="delete_tab"><span class="icon-delete"></span></a><a class="edit_tab"><span class="icon-edit"></span></a></h3><div class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content-active" id="ui-id-'+e+'" aria-labelledby="ui-id-'+e+'" role="tabpanel" style="display: block;" aria-hidden="false">';return e+='<div class="row-fluid spb_column_container spb_sortable_container not-column-inherit ui-sortable ui-droppable"><div data-element_type="spb_text_block"class="spb_text_block spb_content_element spb_sortable span12 ui-resizable ui-sortable-handle  spb_first spb_last"><input type="hidden" class="spb_sc_base" name="element_name-spb_text_block" value="spb_text_block"><div class="spb_element_wrapper clearfix over_element_wrapper"><div class="spb_elem_controls" style="display: none;"><a class="column_delete" href="#" title="Delete"><span class="icon-delete"></span></a><a class="element-save" href="#" title="Save"><span class="icon-save"></span></a><a class="column_clone" href="#" title="Duplicate"><span class="icon-duplicate"></span></a><a class="column_edit" href="#" title="Edit"><span class="icon-edit"></span></a></div><div class="controls sidebar-name"> <div class="column_size_wrapper" style="display: none;"> <a class="column_decrease" href="#" title="Decrease width"></a> <span class="column_size">1/1</span> <a class="column_increase" href="#" title="Increase width"></a> </div><div class="controls_right" style="display: block;"> <a class="element-save" href="#" title="Save"><span class="icon-save"></span></a> <a class="column_edit" href="#" title="Edit"><span class="icon-edit"></span></a> <a class="column_clone" href="#" title="Clone"><span class="icon-duplicate"></span></a> <a class="column_delete" href="#" title="Delete"></a></div></div><div class="spb_elem_handles"><i class="fa-chevron-left"></i><i class="fa-chevron-right"></i></div><div class="icon_holder"><span class="icon-text-block"></span></div><div class="el_name_holder" data_default_name="Text Block">Text Block</div><div class="el_name_editor"><input name="el_name_editor" type="text" value="Text Block "><a class="el-name-save" href="#" title="Save"><span class="icon-save"></span></a></div><input type="hidden" class="spb_param_value general_tab section_tab " name="general_tab" value=""><input type="hidden" class="spb_param_value element_name textfield " name="element_name" value=""><div class="spb_param_value holder title textfield " name="title"></div><input type="hidden" class="spb_param_value icon textfield " name="icon" value=""><div class="spb_param_value holder content textarea_html " name="content"><p> This is a text block. Click the edit button to change this text. </p></div><input type="hidden" class="spb_param_value tb_animation_options section " name="tb_animation_options" value=""><input type="hidden" class="spb_param_value animation dropdown" name="animation" value="none"><input type="hidden" class="spb_param_value animation_delay textfield " name="animation_delay" value="0"><input type="hidden" class="spb_param_value tb_styling_options section " name="tb_styling_options" value=""><input type="hidden" class="spb_param_value padding_vertical uislider " name="padding_vertical" value="0"><input type="hidden" class="spb_param_value padding_horizontal uislider " name="padding_horizontal" value="0"><input type="hidden" class="spb_param_value form_content textfield " name="form_content" value=""><input type="hidden" class="spb_param_value el_class textfield " name="el_class" value=""></div> \x3c!-- end .spb_element_wrapper --\x3e</div> \x3c!-- end #element-spb_text_block --\x3e<div class="tabs_expanded_helper" style="display: none;"><a href="#" class="add_element"><span class="icon-add"></span>Add Element</a><a href="#" class="add_section"><span class="icon-add-tab"></span>Add Section</a></div><div class="container-helper ui-sortable-handle" style="display: block;"><a href="#" class="add-element-to-column btn-floating waves-effect waves-light"><span class="icon-add"></span></a></div></div></div></div>',jQuery(this).parent().hide(),jQuery(this).parent().parent().find(".container-helper").show(),t.append(e),t.accordion("destroy").accordion({header:"> div > h3",autoHeight:!0,heightStyle:"content"}).sortable({axis:"y",handle:"h3",stop:function(e,t){t.item.children("h3").triggerHandler("focusout"),save_spb_html()}}),initDroppable(),save_spb_html(),jQuery(this).parent().parent().parent().parent().find(".title-text").click(),savePbHistory("","Accordion Section","Added"),!1}),jQuery(document).on("click",".spb_accordion_holder .delete_tab",function(e){e.preventDefault();var t=sfTranslatedText.attr("data-spb-delete-accordion-section-q1"),e='<div class="modal_wrapper"><a class="waves-effect waves-light btn modal-trigger" href="#modal-delete"></a><div id="modal-delete-section" class="modal modal_spb"><div class="modal-content">';return e+="<h4>"+sfTranslatedText.attr("data-spb-delete-accordion-header")+'</h4><div class="row"> <div class="input-field delete-block col s12"><label>'+t+"</label>",e+='</div></div><div class="modal-footer modal-delete-section"><a href="#!" class=" modal-action spb-modal-close waves-effect modal-ok-button btn-flat">OK</a><a href="#!" class=" modal-action spb-modal-close waves-effect modal-cancel-button btn-flat">Cancel</a></div></div></div></div>',jQuery("#spb").append(e),jQuery("#modal-delete-section").openModal(),deletedElement=jQuery(this),!1}),jQuery(document).on("click",".modal-delete-section .modal-ok-button",function(e){e.preventDefault(),deletedElement.parent().closest(".group").remove(),Materialize.toast(sfTranslatedText.attr("data-spb-deleted-element"),2e3),save_spb_html()}),jQuery(document).on("click",".modal-remove-template .modal-ok-button",function(e){e.preventDefault();e={action:"spb_delete_template",template_id:deletedElement};jQuery.post(ajaxurl,e,function(e){jQuery(".spb-prebuilt-pages").html(e),spb_reorder_saved_templates(),Materialize.toast(sfTranslatedText.attr("data-spb-deleted-element"),2e3)})}),jQuery(document).on("click",".modal-delete-tab .modal-ok-button",function(e){e.preventDefault();var t=deletedElement.closest("li").index(),a=t+1;if(t<0)return!1;var s=deletedElement.parent().parent().parent(),e=s.find(".ui-tabs-nav li:eq("+t+")").attr("aria-controls");return s.find(".ui-tabs-nav li:eq("+t+")").remove(),s.closest(".spb_sortable").hasClass("spb_tour")?(s.find("#tab-"+a).remove(),s.find("#tab-slide-"+a).remove()):(s.find("#"+e).remove(),s.find("#tab-"+e).remove()),s.tabs("refresh"),save_spb_html(),Materialize.toast(sfTranslatedText.attr("data-spb-deleted-element"),2e3),jQuery(".modal_wrapper").remove(),!1}),jQuery(document).on("click",".input-field label",function(){jQuery(this).prev().hasClass("validate")&&jQuery(this).prev().focus()}),jQuery(".tooltipped").tooltip({delay:0}),jQuery(document).on("click",".right_top_section .icon-delete",function(){jQuery(this).parent().parent().parent().remove()}),jQuery(document).on("click",".pricing_column_holder .icon-delete",function(){jQuery(this).parent().parent().parent().remove()}),jQuery(document).on("click",".spb_add_new_icon_section",function(e){e.preventDefault();var t=jQuery(".section_repeater").size()+1,e="";e+='<li><div class="section_repeater"><div class="left_section"><div class="section_icon_image" style="display:none;"></div><a href="#" class="section_add_icon"><span class="icon-add"></span></a></div><div class="right_section"><div class="right_top_section">',e+='<input name="icon_title_'+t+'" id="icon_title_'+t+'" class="textfield validate active icon_title " placeholder="Icon Box Title" type="text" value="" /><span class="icon-drag-handle"></span><span class="icon-delete"></span></div>',e+='<div class="right_bottom_section"><input name="icon_link_'+t+'" id="icon_link_'+t+'" class="textfield validate active icon_link" placeholder="Icon Box Link" type="text" value="" />',e+='<select id="select_section_'+t+'"  class="icon_target"><option value="_self" selected>'+sfTranslatedText.attr("data-spb-same-window")+'</option><option value="_blank">'+sfTranslatedText.attr("data-spb-new-window")+"</option></select></div>",e+='</div><ul class="font-icon-grid repeater-grid svg-grid">'+jQuery(".section_repeater").find(".font-icon-grid").first().html()+"</ul></div></li>",jQuery(".section_repeater").last().parent().after(e),jQuery(".icon_section_holder").find("select").not(".disabled").material_select()}),jQuery(document).on("click",".spb_add_new_column_feature",function(e){e.preventDefault();var t=jQuery(".section_repeater_features").size()+1,e="";e+='<li><div class="collapsible-header">'+sfTranslatedText.attr("data-spb-feature-name")+'<div class="pricing_col_actions"><span class="icon-drag-handle"></span><span class="icon-delete"></span></div></div><div class="collapsible-body"><div class="section_repeater_features">',e+='<div class="row"><div class="input-field col s12"><input name="plan_feature_name_'+t+'" id="plan_feature_name_'+t+'" class="textfield validate active plan_feature_name" type="text"  value="'+sfTranslatedText.attr("data-spb-feature-name")+'" /><label class="active" for="plan_feature_name_'+t+'">'+sfTranslatedText.attr("data-spb-feature-name")+"</label></div></div>",e+='<div class="row"><div class="input-field col s12"><input name="plan_feature_name_el_class_'+t+'" id="plan_feature_name_el_class_'+t+'" class="textfield validate active feature_el_class" type="text"  value="" /><label for="plan_feature_name_el_class_'+t+'">'+sfTranslatedText.attr("data-spb-extra-class")+"</label></div></div>",e+=" </div></div></li>",jQuery(this).parent().parent().find(".pricing_column_feature_holder").append(e),jQuery(".collapsible").collapsible({accordion:!1})}),jQuery(document).on("click",".spb_add_new_pricing_column",function(e){e.preventDefault();var t=jQuery(".section_repeater").size()+1,a="",e="";e+='<ul class="collapsible pricing_column_feature_holder" data-collapsible="accordion">',e+='<li><div class="collapsible-header">'+sfTranslatedText.attr("data-spb-feature-name")+'<div class="pricing_col_actions"><span class="icon-drag-handle"></span><span class="icon-delete"></span></div></div><div class="collapsible-body"><div class="section_repeater_features">',e+='<div class="row"><div class="input-field col s12"><input name="plan_feature_name_'+t+'_1" id="plan_feature_name_'+t+'_1" class="textfield validate active plan_feature_name" type="text"  value="'+sfTranslatedText.attr("data-spb-feature-name")+'" /><label class="active" for="plan_feature_name_'+t+'_1">'+sfTranslatedText.attr("data-spb-feature-name")+"</label></div></div>",e+='<div class="row"><div class="input-field col s12"><input name="plan_feature_name_el_class_'+t+'_1" id="plan_feature_name_el_class_'+t+'_1" class="textfield validate active feature_el_class" type="text"  value="" /><label class="active" for="plan_feature_name_el_class_'+t+'_1">'+sfTranslatedText.attr("data-spb-extra-class")+"</label></div></div>",e+="</div></div></li></ul>",e+='<div class="bottom_action"><a href="#" class="spb_add_new_column_feature">'+sfTranslatedText.attr("data-spb-add-feature")+"</a></div>",a+='<li><div class="collapsible-header"> '+sfTranslatedText.attr("data-spb-new-plan")+'<div class="pricing_col_actions"><span class="icon-drag-handle"></span><span class="icon-delete"></span></div></div><div class="collapsible-body">',a+='<div class="section_repeater">',a+='<div class="price_column_holder">',a+='<div class="row"><div class="input-field col s12"><input name="plan_name_'+t+'" id="plan_name_'+t+'" class="textfield validate active plan_name" type="text"  value="'+sfTranslatedText.attr("data-spb-new-plan")+'" /><label class="active" for="plan_name_'+t+'">'+sfTranslatedText.attr("data-spb-plan-name")+"</label></div></div>",a+='<div class="row"><div class="input-field col s12 plan_highlight_column"><select id="select_highlight_column_'+t+'" ><option value="no" selected>'+sfTranslatedText.attr("data-spb-no")+'</option><option value="yes">'+sfTranslatedText.attr("data-spb-yes")+'</option></select><label for="select_highlight_column_'+t+'">'+sfTranslatedText.attr("data-spb-highlight-column")+"</label></div></div>",a+='<div class="row"><div class="input-field col s12"><input name="plan_price_'+t+'" id="plan_price_'+t+'" class="textfield validate active plan_price" type="text" value="" /><label for="plan_price_'+t+'">'+sfTranslatedText.attr("data-spb-plan-price")+"</label></div></div>",a+='<div class="row"><div class="input-field col s12"><input name="plan_period_'+t+'" id="plan_period_'+t+'" class="textfield validate active plan_period" type="text" value="" /><label for="plan_period_'+t+'">'+sfTranslatedText.attr("data-spb-plan-period")+"</label></div></div>",a+='<div class="features_row_holder"><label>'+sfTranslatedText.attr("data-spb-features")+"</label>"+e+"</div>",a+='<div class="row"><div class="input-field col s12"><input name="plan_button_text_'+t+'" id="plan_button_text_'+t+'" class="textfield validate active plan_button_text" type="text" value="" /><label for="plan_button_text_'+t+'">'+sfTranslatedText.attr("data-spb-btn-text")+"</label></div></div>",a+='<div class="row"><div class="input-field col s12"><input name="plan_link_url_'+t+'" id="plan_link_url_'+t+'" class="textfield validate active plan_link_url" type="text" value="" /><label for="plan_link_url_'+t+'">'+sfTranslatedText.attr("data-spb-link-url")+"</label></div></div>",a+='<div class="row"><div class="input-field col s12 plan_link_target"> <select id="select_link_target_'+t+'"><option value="_self" selected>'+sfTranslatedText.attr("data-spb-same-window")+'</option><option value="_blank" >'+sfTranslatedText.attr("data-spb-new-window")+'</option></select><label for="select_link_target_'+t+'">'+sfTranslatedText.attr("data-spb-link-target")+"</label></div></div>",a+='<div class="row"><div class="input-field col s12"><input name="plan_extra_class_'+t+'" id="plan_extra_class_'+t+'" class="textfield validate active plan_extra_class" type="text" value="" /><label for="plan_extra_class_'+t+'">'+sfTranslatedText.attr("data-spb-extra-class")+"</label></div></div>",a+="</div></div></div></li>",jQuery(".section_repeater").last().parent().parent().after(a),jQuery(".pricing_column_holder").find("select").not(".disabled").material_select(),jQuery(".collapsible").collapsible({accordion:!1})}),jQuery(document).on("click",".section_repeater input",function(){jQuery(this).focus()}),jQuery(".dropdown-history").dropdown({inDuration:300,outDuration:225,constrain_width:!1,hover:!0,gutter:0,belowOrigin:!0,alignment:"left"}),s(".tooltipped").tooltip({delay:0}),jQuery("body").on("change","#spb_edit_form select, #spb_edit_form radio, #spb_edit_form input[type=checkbox], #spb_edit_form input[type=hidden], .spb-buttonset",function(){var e;jQuery(this).hasClass("spb-buttonset")&&(e=jQuery(this).parent().find(":radio:checked").data("id"),jQuery(this).find(".buttonset").val(e)),check_form_dependency_fields()}),jQuery(document).on("hover",".spb-content-elements li",function(){jQuery(this).addClass("z-depth-4")}),jQuery(document).on("mouseout",".spb-content-elements li",function(){jQuery(this).removeClass("z-depth-4")}),jQuery(".sf-close-delete-file").on("click",function(e){return e.preventDefault(),jQuery(this).parent().parent().remove(),jQuery(".sf_gallery_widget_attached_images_ids").val(""),!1}),jQuery("body").append('<div class="spb-modal-tabs"></div>'),jQuery(document).on("change",".range-field .uislider",function(){jQuery("#"+jQuery(this).attr("name")+"_val").val(jQuery(this).val());var e=jQuery(this);parseInt(jQuery(this).val())>parseInt(e.attr("max"))?(e.prev().width("100%"),jQuery(this).val(e.attr("max"))):e.prev().width(jQuery(this).val()/e.attr("max")*100+"%")}),jQuery(document).on("keydown",".uisliderinput",function(e){var t=jQuery(this).parent().prev().find("input");13!=e.which&&13!=e.keyCode||(e.preventDefault(),parseInt(jQuery(this).val())>parseInt(t.attr("max"))?(t.prev().width("100%"),t.val(t.attr("max")),jQuery(this).val(t.attr("max"))):(t.prev().width(jQuery(this).val()/t.attr("max")*100+"%"),jQuery(this).parent().prev().find("input").val(jQuery(this).val())),jQuery(".spb_edit_form_elements .custom-padding-top").val(jQuery("#padding_vertical").val()),jQuery(".spb_edit_form_elements .custom-padding-bottom").val(jQuery("#padding_vertical").val()),jQuery(".spb_edit_form_elements .custom-padding-left").val(jQuery("#padding_horizontal").val()),jQuery(".spb_edit_form_elements .custom-padding-right").val(jQuery("#padding_horizontal").val()),jQuery(".spb_edit_form_elements .custom-margin-top").val(jQuery("#margin_vertical").val()),jQuery(".spb_edit_form_elements .custom-margin-bottom").val(jQuery("#margin_vertical").val()))}),s(document).on("click",".tab_features_row",function(){jQuery(this).addClass("active"),jQuery(this).prev().removeClass("active"),jQuery(this).parent().parent().find(".features_row_holder").show(),jQuery(this).parent().parent().find(".section_repeater").hide()}),s(document).on("click",".tab_price_column",function(){jQuery(this).addClass("active"),jQuery(this).next().removeClass("active"),jQuery(this).parent().parent().find(".features_row_holder").hide(),jQuery(this).parent().parent().find(".section_repeater").show()}),s(document).on("focusin",".uisliderinput",function(e){return e.preventDefault(),e.stopImmediatePropagation(),!1}),s(document).on("mouseover",".spb_accordion",function(){s(this).find(".spb_accordion_controls").fadeIn()}),s(document).on("mouseleave",".spb_accordion",function(){s(this).find(".spb_accordion_controls").fadeOut()}),s(document).on("mouseover",".spb_tabs, .spb_tour, .spb_gmaps, .spb_multilayer_parallax",function(){s(this).find(".spb_tab_controls").fadeIn()}),s(document).on("mouseleave",".spb_tabs, .spb_tour, .spb_gmaps, .spb_multilayer_parallax",function(){s(this).find(".spb_tab_controls").fadeOut()}),s(document).on("mouseover",".spb-content-elements-saved .spb_elements_li",function(){s(this).find(".spb_remove_element").show()}),s(document).on("mouseleave",".spb-content-elements-saved .spb_elements_li",function(){s(this).find(".spb_remove_element").hide()}),s(document).on("mouseenter",".spb_content_element:not(.spb_tabs, .spb_accordion, .spb_gmaps, .spb_multilayer_parallax, .spb_tour)",function(){var e=s(this);return setTimeout(function(){e.is(":hover")&&e.find(".spb_elem_controls").fadeIn(),e.find(".spb_elem_controls").fadeIn()},100),!1}),s(document).on("mouseleave",".spb_content_element",function(e){s(this).find(".spb_elem_controls").hide(),"block"==s(this).find(".el_name_editor").css("display")&&(s(this).find(".el_name_editor").hide(),s(this).find(".el_name_editor").prev().show()),e.stopImmediatePropagation()}),s(document).on("click",".el_name_holder",function(){s(this).parent().find(".spb_elem_controls").fadeOut();var e=s(this).next().find("select[name=el_name_editor], input[name=el_name_editor]").first();s(this).hide(),s(this).next().show(),e.focus()}),s(document).on("click",".el-name-save",function(e){e.preventDefault(),(e=(s(this).parent().prev().hasClass("el_name_holder")?s(this):s(this).parent()).parent()).prev().html(s(this).prev().val()),e.parent().parent().find(".element_name").first().val(s(this).prev().val()),e.prev().show(),e.hide(),save_spb_html()}),s(document).keypress(function(e){13!=e.which||"el_name_editor"!=jQuery(e.target).attr("id")&&"el_name_editor"!=jQuery(e.target).attr("name")||(e.preventDefault(),s(".el-name-save").trigger("click"))}),s(document).on("click","select[name=el_name_editor], input[name=el_name_editor], #el_name_editor",function(e){e.preventDefault()}),s(document).on("click",".tab_closing",function(){return cleaningAfterClosingElementsModal(),!1}),s(document).on("click","#cancel-small-form-background",function(){return jQuery(".spb-modal-tabs").html(""),jQuery(".spb-modal-tabs").hide(),jQuery("#spb_edit_form").hide(),jQuery("body").css("overflow",""),!1}),s(document).on("click","#save-small-form",function(){return saveSmallFormEditing(),!1}),s(".spb_most_used, .spb_ui_tab, .spb_med_tab, .spb_data_tab, .spb_layout_tab, .spb_misc_tab, .spb_search_tab, .spb_saved_el_tab, .spb_saved_pages_el_tab").on("click",function(){s("#sf_search_elements").val(""),s(".hide-modal_elements").removeClass("hide-modal_elements"),s(".spb_elements_tabs_header").find(".active_tab").removeClass("active_tab"),s(this).addClass("active_tab"),jQuery(this).hasClass("spb_saved_el_tab")||s(".spb-content-elements").show(),jQuery(this).hasClass("spb_data_tab")&&(s(".spb-item-slideout li").css("display","none"),s(".spb_tab_data_nav").parent().css("display","inline-block"),s(".spb-content-elements").fadeIn(300)),jQuery(this).hasClass("spb_med_tab")&&(s(".spb-item-slideout li").css("display","none"),s(".spb_tab_media_nav").parent().css("display","inline-block"),s(".spb-content-elements").fadeIn(300)),jQuery(this).hasClass("spb_search_tab")&&(s(".spb-item-slideout li").css("display","inline-block"),s(".spb-content-elements").fadeIn(300)),jQuery(this).hasClass("spb_saved_pages_el_tab")&&(s(".spb-item-slideout").css("display","none"),s(".spb-prebuilt-pages .spb_template_li").css("display","inline-block"),s(".spb-prebuilt-pages .sf_prebuilt_template").css("display","inline-block"),s(".spb-prebuilt-pages").fadeIn(300)),jQuery(this).hasClass("spb_ui_tab")&&(s(".spb-item-slideout li").css("display","none"),s(".spb_tab_ui_nav").parent().css("display","inline-block"),s(".spb-content-elements-ui").fadeIn(300)),jQuery(this).hasClass("spb_layout_tab")&&(s(".spb-item-slideout li").css("display","none"),s(".spb_tab_layout_nav").parent().css("display","inline-block"),s(".spb-content-elements-layout").fadeIn(300)),jQuery(this).hasClass("spb_saved_el_tab")&&(s(".spb-item-slideout").css("display","none"),s(".spb-item-slideout li").css("display","none"),s(".spb-content-elements").css("display","none"),s(".spb-content-elements-saved .spb_elements_li").css("display","inline-block"),s(".spb-content-elements-saved").fadeIn(300)),jQuery(this).hasClass("spb_misc_tab")&&(s(".spb-item-slideout li").css("display","none"),s(".spb_tab_misc_nav").parent().css("display","inline-block"),s(".spb-content-elements-misc").fadeIn(300)),jQuery(this).hasClass("spb_most_used")&&(s(".spb-content-elements").css("display","none"),s(".spb-item-slideout li").css("display","none"),s(".spb-most-used-elements li").css("display","inline-block"),s(".spb-most-used-elements").fadeIn(300))}),s(document).on("click",".spb_element_section_tab",function(){jQuery(".spb_element_section_tab").removeClass("active_tab"),jQuery(this).addClass("active_tab"),jQuery(".element_tab_content").hide(),jQuery("."+jQuery(this).attr("data-content-name")).show()}),s(document).on("click","#sf_directory_calculate_coordinates",function(e){e.preventDefault(),(new google.maps.Geocoder).geocode({address:jQuery("#sf_directory_address").val()},function(e){jQuery("#sf_directory_lat_coord").val(e[0].geometry.location.lat()),jQuery("#sf_directory_lng_coord").val(e[0].geometry.location.lng())})}),s(document).on("mouseenter",".spb_sortable",function(e){e.preventDefault(),s("body").hasClass("startedDragging")||(s(this).find(".controls_right:first").fadeIn(100),s(this).find(".spb_element_wrapper").addClass("over_element_wrapper"))}),s(document).on("mouseleave",".spb_sortable",function(e){e.preventDefault(),s(this).find(".controls_right:first , .column_size_wrapper:first").hide(),s(".spb_map_pin .controls_right , .spb_map_pin .column_size_wrapper").show(),s(this).removeClass("over_element_wrapper")}),s(document).on("click","#close-fullscreen-preview",function(e){e.preventDefault(),jQuery("body").css("overflow",""),s("#spb_edit_form").html("").fadeOut()}),s("#previewpage-spb").click(function(e){e.preventDefault(),jQuery(".spb_main_sortable > div").length?(jQuery("body").css("overflow","hidden"),jQuery("#spb_edit_form").html('<div class="spb_preview_fmodal"><div class="spb_preview_fmodal_top_bar"><span class="spb_smodal_header_text">Previewing Page</span><a href="#" id="close-fullscreen-preview" style="float:right;color: #FFFEFE;padding: 15px;">Close Preview</a></div><div class="spb_preview_lockdiv"></div><div class="spb_preview_fmodal_content"><div class="spinnerholder"><div class="spinnermessage"><h4>'+jQuery("#spb_loading").val()+'</h4></div><div class="importspinner">  <div class="bounce1"></div> <div class="bounce2"></div> <div class="bounce3"></div> </div></div></div></div>').show().css({"padding-top":60}),jQuery(".spb_preview_fmodal_content").load(s("#post-preview").attr("href"))):alert("Please add some content before previewing the page.")}),s(document).on("click","#sf_search_elements",function(){s(".spb_search_tab").trigger("click")}),s(document).on("input","#sf_search_saved_elements",function(){var e,t=!1,a=s(".page_builder_saved_elements .spb_saved_el_tab").hasClass("active_tab")?".spb-content-elements-saved":".spb-prebuilt-pages";1<s(this).val().length?(e=s(this).val().toLowerCase().replace(/\b[a-z]/g,function(e){return e.toUpperCase()}).toLowerCase(),s(a+" > li").find("a").each(function(){s(this).html().toLowerCase().indexOf(e)<0?s(this).parent().addClass("hide-modal_elements"):(s(this).parent().removeClass("hide-modal_elements"),t=!0)})):s(a+" > li").find("a").parent().removeClass("hide-modal_elements"),""!==s(this).val()&&t||s(a+" > li").find("a").parent().removeClass("hide-modal_elements")}),s(document).on("input","#sf_search_elements",function(){var e,t=!1;1<s(this).val().length?(e=s(this).val().toLowerCase().replace(/\b[a-z]/g,function(e){return e.toUpperCase()}),s(".spb-content-elements > li").find("a").each(function(){s(this).html().indexOf(e)<0?s(this).parent().addClass("hide-modal_elements"):(s(this).parent().removeClass("hide-modal_elements"),t=!0,jQuery(".spb-elements-no-results").hide())})):(s(".spb-content-elements > li").find("a").parent().removeClass("hide-modal_elements"),jQuery(".spb-elements-no-results").hide()),""!==s(this).val()&&t||(s(".spb-content-elements > li").find("a").parent().removeClass("hide-modal_elements"),jQuery(".spb-elements-no-results").hide()),""!==s(this).val()&&3<=s(this).val().length&&!t&&(s(".spb-content-elements > li").find("a").parent().addClass("hide-modal_elements"),jQuery(".spb-elements-no-results").show())}),s(document).on("input",".asset-auto-complete",function(){var e,t=!1;1<s(this).val().length?(e=s(this).val().toLowerCase().replace(/\b[a-z]/g,function(e){return e.toUpperCase()}),s(".spb-content-elements > li").find("a").each(function(){s(this).html().indexOf(e)<0?s(this).hide():(s(this).show(),t=!0)})):s(".spb-content-elements > li").find("a").show(),""!==s(this).val()&&t||s(".spb-content-elements > li").find("a").show()}),s(document).on("input",".search-icon-grid",function(){var e;1<s(this).val().length?(e=s(this).val().toLowerCase().replace(/\b[a-z]/g,function(e){return e.toUpperCase()}).toLowerCase(),s(".font-icon-grid > li").find("span").each(function(){s(this).html().indexOf(e)<0?s(this).parent().hide():s(this).parent().show()})):s(".font-icon-grid > li").show()}),s("#spb .dropable_el, #spb .dropable_column").draggable({helper:function(){return s('<div id="drag_placeholder">'+s(this).html()+"</div>").appendTo("body")},zIndex:999999999999,revert:"invalid",distance:2,start:function(){cleaningAfterClosingElementsModal(),jQuery("body").addClass("startedDragging"),jQuery(".metabox-builder-content").removeClass("empty-builder"),jQuery(".spb-item-slideout").hide(),jQuery(".dropdown-toggle").removeClass("selected"),jQuery(".dropdown").removeClass("open"),s(".main_wrapper").prepend('<div class="newtop_sortable_element spb_first spb_last"><div class="new_element_col1"><div class="new_element_plus_sign">+</div></div><div class="new_element_col2"> <div class="newtop_element_text"> </div></div></div>');var e=0;s(".sortable_1st_level").each(function(){s(this).parent().hasClass("spb_main_sortable")&&s(this).hasClass("spb_last")&&(e++,s(this).after('<div class="new_sortable_element spb_first spb_last" datael-position="'+e+'"><div class="new_element_col1"><div class="new_element_plus_sign">+</div></div><div class="new_element_col2"> <div class="newtop_element_text"> </div></div></div>'))});var t=1;s(".spb_row .spb_column_container").each(function(){jQuery(this).prepend('<div datael-position="1" datael-class="row_top_'+t+'" class="newrowtop_sortable_element spb_first spb_last"><div class="new_element_col1"><div class="new_element_plus_sign">+</div></div><div class="new_element_col2"> <div class="newtop_element_text"></div></div></div>'),jQuery(this).addClass("row_top_"+t),t++}),e=0,s(".spb_row .spb_sortable").each(function(){s(this).parent().hasClass("spb_column_container")&&s(this).hasClass("spb_last")&&(e++,s(this).addClass("spb_row_"+e),s(this).after('<div class="newrow_sortable_element spb_first spb_last" datael-position="'+e+'"><div class="new_element_col1"><div class="new_element_plus_sign">+</div></div><div class="new_element_col2"> <div class="newtop_element_text"> </div></div></div>'))}),initDroppable()},stop:function(){jQuery("body").removeClass("startedDragging"),jQuery(".newtop_sortable_element").remove(),jQuery(".new_sortable_element").remove(),jQuery(".newrowtop_sortable_element").remove(),jQuery(".newrow_sortable_element").remove()}}),initDroppable(),s(".dropdown-toggle").on("click",function(e){if(e.preventDefault(),s(".dropdown-toggle").removeClass("selected"),s(".spb-elements-no-results").hide(),s(this).hasClass("spb_custom_elements")?(s(".page_builder_saved_elements .spb_saved_el_tab").click(),s(".page_builder_saved_elements").show(),s(".spb_elements_tabs_header").show(),s(".page_builder_elements_header").hide(),s("#spb_edit_form").show().css({opacity:.8}),s("body").css({overflow:"hidden"}),s("#spb-option-slideout").fadeIn()):(s(".spb_tab_media_nav").parent().show(),s(" .spb-item-slideout").hide(),s(".page_builder_saved_elements").hide(),s(".page_builder_elements_header").show(),s(".spb_elements_tabs_header").show(),s(".spb_search_tab").addClass("active_tab"),s("#spb_edit_form").show().css({opacity:.8}),s("body").css({overflow:"hidden"}),s("#spb-option-slideout").fadeIn(),s(".spb-content-elements.spb-item-slideout").show(),s(".spb-prebuilt-pages-fullscreen").removeClass("selected"),s(".spb-content-elements").removeClass("selected"),s(".spb-item-slideout").removeClass("selected")),s(this).hasClass("spb_prebuilt_pages")&&s(".spb-prebuilt-pages").hasClass("selected"))s(".spb-item-slideout").removeClass("selected");else if(s(this).hasClass("spb_prebuilt_pages")&&(s(".spb-item-slideout").removeClass("selected"),s("body").hasClass("spb-fullscreen-mode")||(s(".spb-content-elements").removeClass("selected"),s(".spb-content-elements").hide())),s(this).hasClass("spb_content_elements")&&(s(".spb-prebuilt-pages").removeClass("selected"),s(".spb-prebuilt-pages").hide(),s(".spb_columns").parent().removeClass("open")),s(this).hasClass("spb-prebuilt-pages")&&(s(".spb-content-elements").removeClass("selected"),s(".spb-content-elements").hide()),s("#spb-elements").hasClass("subnav-fixed")||s(this).hasClass("spb_templates")||s(this).hasClass("spb_custom_elements")||s(this).hasClass("spb_columns"))s(this).parent().hasClass("open")?s(this).parent().removeClass("open"):(s("#spb-elements .dropdown").removeClass("open"),s(this).parent().addClass("open"));else{s(".dropdown").removeClass("open");s("#spb-option-slideout");e=s(this).attr("data-slideout"),e=s("."+e);if(s(this).hasClass("spb-prebuilt-pages-fullscreen")&&s(".spb-prebuilt-pages-fullscreen"),e.hasClass("selected"))return s(".spb-item-slideout").removeClass("selected"),void s(".spb-prebuilt-pages-fullscreen").removeClass("selected");s(this).addClass("selected")}}),s("#publish").click(function(){s("#spb_content").html("")}),s(".clickable_layout_action").click(function(){s(".dropdown-toggle").removeClass("selected"),s(".dropdown").removeClass("open")}),s("#spb-elements .clickable_action").click(function(e){e.preventDefault(),""===currentAsset&&(currentAsset=s(".main_wrapper")),currentAsset=(jQuery(this).hasClass("spb_accordion_nav")&&0<currentAsset.parents(".spb_tabs").length||jQuery(this).hasClass("spb_tabs_nav")&&0<currentAsset.parents(".spb_accordion").length||getElementMarkup(currentAsset,s(this),"initDroppable"),""),close_elements_dropdown()}),s(".spb-content-elements .clickable_action, .spb-most-used-elements  .clickable_action").click(function(e){var t=jQuery(this);e.preventDefault(),getElementMarkup(currentAsset=""===currentAsset?s(".main_wrapper"):currentAsset,s(this),"initDroppable"),currentAsset="",jQuery(".tab_closing .icon-close").trigger("click"),save_spb_html(),setTimeout(function(){savePbHistory(t.attr("data-element"),t.find("p").text(),"Added"),trackMostusedElements(t.attr("data-element"))},2e3)}),s("#spb-elements .clickable_layout_action").click(function(e){e.preventDefault(),getElementMarkup(s(".main_wrapper"),s(this),"initDroppable")}),s(document).on("click",".spb_tabs_holder .add_element, .spb_accordion_holder .add_element",function(e){e.preventDefault(),currentAsset=s(this).parent().parent(),open_elements_dropdown(),s(this).parent().hide(),s(this).parent().parent().find(".container-helper").show()}),s(document).on("click",".add-element-to-column",function(e){e.preventDefault(),s(this).parent().parent().parent().hasClass("spb_tabs_holder")||s(this).parent().parent().parent().hasClass("spb_accordion_helper")?(s(this).parent().fadeOut(),s(this).parent().parent().find(".tabs_expanded_helper").fadeIn()):s(this).parent().parent().parent().parent().parent().hasClass("spb_accordion_holder")?(s(this).parent().hide(),s(this).parent().parent().find(".tabs_expanded_helper").show()):(currentAsset=s(this).parent().parent(),open_elements_dropdown())}),columnControls(),1==s("#spb").length&&(s("div#postdivrich").before('<p class="page-builder-switch"><a class="spb_switch-to-builder button-primary" style="display:none;" href="#">Use Page Builder</a></p>'),s("#spb").children().first().append('<span class="icon-expand-less pb-main-icon"></span><span class="icon-expand-more pb-main-icon"></span>'),s("#spb h2").first().prepend('<span class="icon-icon-page-builder pb-main-icon"></span>'),e=s("#spb-elements").attr("data-color-scheme"),jQuery("body").addClass(e),t=s("#postdivrich"),a=s("#spb"),e=getURLVars(),s(".spb_switch-to-builder").click(function(e){e.preventDefault(),t.is(":visible")?(isTinyMceActive()||void 0!==switchEditors&&s("#content-tmce").get(0).click(),t.hide(),a.show(),s("#spb_status").val("true"),s(this).html("Use Default editor").addClass("default"),spb_shortcodesToBuilder(!1),spb_navOnScroll()):(jQuery.swift_page_builder.save_spb_html(),t.show(),a.hide(),s("#spb_status").val("false"),s(window).trigger("resize"),s(this).html("Use Page Builder").removeClass("default"))}),e.spb_enabled&&"false"===s("#spb_status").val()&&s(".spb_switch-to-builder").trigger("click"),"true"==s("#spb_status").val()&&jQuery("#wp-content-wrap").hasClass("tmce-active")?(t.hide(),a.show(),s(".spb_switch-to-builder").html("Use Default editor").addClass("default")):(t.show(),a.hide(),s(".spb_switch-to-builder").html("Swift Page Builder"),s(".spb_switch-to-builder").show())),jQuery(window).on("load",function(){"true"==s("#spb_status").val()&&jQuery("#wp-content-wrap").hasClass("tmce-active")&&(setTimeout(function(){spb_shortcodesToBuilder(!1)},900),spb_navOnScroll())}),jQuery(".toggle_title").on("click",function(){jQuery(this).hasClass("toggle_title_active")?jQuery(this).removeClass("toggle_title_active").next().hide():jQuery(this).addClass("toggle_title_active").next().show()}),s.swift_page_builder.galleryImagesControls(),s("#spb").on("click",".add-text-block-to-content",function(e){e.preventDefault(),s(this).attr("parent-container")?s(this).parent().parent().hasClass("ui-accordion-content")||s(this).parent().parent().hasClass("ui-tabs-panel")||s(this).parent().parent().parent().hasClass("ui-accordion-content")||s(this).parent().parent().parent().hasClass("ui-tabs-panel")||s(this).parent().parent().hasClass("spb_column_container")?getElementMarkup(s(this).parent().parent(),s("#spb_text_block")):getElementMarkup(s(s(this).attr("parent-container")),s("#spb_text_block")):getElementMarkup(s(this).parent().parent().parent(),s("#spb_text_block"))}),l=s(".spb_content_elements").parent().find("ul"),(n=l.children("li").get()).sort(function(e,t){e=s(e).text().toUpperCase(),t=s(t).text().toUpperCase();return e<t?-1:t<e?1:0}),s.each(n,function(e,t){l.append(t)}),i("spb-content-elements"),i("spb-most-used-elements"),s(".alt_background").on("change",function(){s(".altbg-preview").attr("class","altbg-preview"),s(".altbg-preview").addClass(jQuery(this).val())}),s(document).on("click","#clear-spb",function(e){e.preventDefault(),clear_page_builder_content()}),s(".columns-dropdown").before('<ul class="nav assetsearch" style="display:none;"><input type="text" class="asset-auto-complete" placeholder="Search Element"></ul>'),s(document).on("click","#fullscreen-spb",function(e){e.preventDefault(),s(".spb-item-slideout").hide(),s(".spb-item-slideout").removeClass("selected"),s(".dropdown-toggle").removeClass("selected"),s(".dropdown").removeClass("open"),s("body").addClass("spb-fullscreen-mode"),s(".normalscreen-step1").hide(),s("#spb-empty").addClass("spb-empty-fullscreen"),s(".assetsearch").show(),s(".fullscreen-step1").show(),s(".spb-prebuilt-pages").hide(),s("#spb-option-slideout").addClass("spb-option-slideout-fullscreen-aux"),initDroppable()}),s("#close-fullscreen-spb").on("click",function(e){e.preventDefault(),s("#spb-option-slideout").removeClass("spb-option-slideout-fullscreen-aux"),s(".spb-item-slideout-fullscreen").addClass("spb-item-slideout"),s(".spb-item-slideout").removeClass("spb-item-slideout-fullscreen"),s(".spb-item-slideout").hide(),s(".spb-content-elements > li").find("a").show(),s(".asset-auto-complete").val(""),s(".previewpage-spb").hide(),s(".assetsearch").hide(),s(".fullscreen-step1").hide(),s(".normalscreen-step1").show(),s(".spb-prebuilt-pages-fullscreen").removeClass("selected"),s(".spb-prebuilt-pages-fullscreen").removeClass("open"),s(".spb-item-slideout-fullscreen").hide(),s("body").removeClass("spb-fullscreen-mode"),s("#spb-empty").removeClass("spb-empty-fullscreen"),s(".spb-prebuilt-pages").removeClass("spb-prebuilt-pages-fullscreen"),s(".spb-prebuilt-pages").addClass("spb-item-slideout"),s(".spb_content_elements").show(),s(".spb-item-slideout").hide(),s(".dropdown-toggle").removeClass("selected"),s(".spb_templates").removeClass("open")})});var $win,$nav,navTop,isFixed=0;function spb_navOnScroll(){$win=jQuery(window),$nav=jQuery("#spb-elements"),navTop=jQuery("#spb-elements").is(":visible")?jQuery("#spb-elements").length&&jQuery("#spb-elements").offset().top-28:jQuery("#spb").offset().top-28,isFixed=0,spb_processScroll(),$win.on("scroll",spb_processScroll)}function spb_processScroll(){var e=$win.scrollTop();navTop<=e&&!isFixed?(isFixed=1,$nav.addClass("subnav-fixed")):e<=navTop&&isFixed&&(isFixed=0,$nav.removeClass("subnav-fixed"),jQuery("#spb-elements .dropdown").removeClass("open"))}function check_form_dependency_fields(){jQuery("#spb_edit_form .dependency-field").each(function(){var e,a,s,t=jQuery(this).attr("data-parent-operator"),l=jQuery(this).attr("data-parent-value"),n=0;switch(t){case"=":case"equals":s=jQuery("#spb_edit_form  ."+jQuery(this).attr("data-parent-id")),(1<s.length?s.find("select").val():s.hasClass("buttonset")?s.is(":checked")?s.attr("data-value-on"):s.attr("data-value-off"):jQuery("#spb_edit_form  ."+jQuery(this).attr("data-parent-id")).val())==l?jQuery(this).removeClass("hide"):jQuery(this).addClass("hide");break;case"!=":case"not":e=jQuery(this).attr("data-parent-value").split(","),a=jQuery(this),n=0,jQuery.each(e,function(e,t){s=jQuery("#spb_edit_form  ."+a.attr("data-parent-id")),(1<s.length?s.find("select").val():s.hasClass("buttonset")?s.is(":checked")?s.attr("data-value-on"):s.attr("data-value-off"):jQuery("#spb_edit_form  ."+jQuery(this).attr("data-parent-id")).val())!=t.trim()&&n++}),n==e.length?jQuery(this).removeClass("hide"):jQuery(this).addClass("hide");break;case"or":e=jQuery(this).attr("data-parent-value").split(","),a=jQuery(this),n=0,jQuery.each(e,function(e,t){s=jQuery("#spb_edit_form  ."+a.attr("data-parent-id")),(1<s.length?s.find("select").val():s.hasClass("buttonset")?s.is(":checked")?s.attr("data-value-on"):s.attr("data-value-off"):jQuery("#spb_edit_form  ."+jQuery(this).attr("data-parent-id")).val())!=t.trim()&&n++}),n==e.length?jQuery(this).addClass("hide"):jQuery(this).removeClass("hide")}})}function updateSelectedImagesOrderIds(e){var t=[];jQuery(e).find(".added img").each(function(){t.push(jQuery(this).attr("rel"))}),jQuery(e).parent().prev().prev().val(t.join(","))}function attachedImgSortable(e){jQuery(e).sortable({forcePlaceholderSize:!0,placeholder:"widgets-placeholder",cursor:"move",items:"li",update:function(){updateSelectedImagesOrderIds(e)}})}function spb_shortcodesToBuilder(e){var t=spb_getContentFromTinyMCE();0<jQuery.trim(t).length&&"["!=jQuery.trim(t).substr(0,1)&&"<span"!=jQuery.trim(t).substr(0,5)&&"<p>"!=jQuery.trim(t).substr(0,3)&&!e&&(alert("By switching to the page builder, any content not in page builder assets will be removed for consistency. If no page builder is used, the content will get added to a text block."),t.indexOf("[spb_")<=-1&&(t='[spb_text_block pb_margin_bottom="no" pb_border_bottom="no" width="1/1" el_position="first last"]'+t+"[/spb_text_block]"),isTinyMceActive()?tinyMCE.get("content").setContent(t):t=jQuery("#content").text(t));var a,s=jQuery(".spb-svg-loader.clone").html();jQuery(".spb_main_sortable").html('<div class="spb-loading-message">'+s+'<div class="loading_text">'+jQuery("#spb_loading").val()+"</div></div>").show().css({"padding-top":60}),e||jQuery(".spb_switch-to-builder").hide(),void 0!==t&&(a=t.indexOf("<form"),s=t.indexOf("</form>"),0<=a&&(e=t.substr(a,s+=7-a).replace(/"/g,"'"),t=t.replace(t.substr(a,s),e))),jQuery.post(ajaxurl,{action:"spb_shortcodes_to_builder",content:t},function(e){jQuery(".spb_main_sortable").html(e),spb_elements_hide_controls(!0),jQuery.swift_page_builder.isMainContainerEmpty(),jQuery(".spb_switch-to-builder").show(),jQuery(".tooltipped").tooltip({delay:50}),jQuery.swift_page_builder.addLastClass(jQuery(".spb_main_sortable")),initDroppable(),jQuery(".spb_main_sortable").find(".spb_init_callback").each(function(){var e=window[jQuery(this).attr("value")];"function"==typeof e&&e(jQuery(this).closest(".spb_sortable"))})})}function spb_getContentFromTinyMCE(){var e="";return isTinyMceActive()?null==(e=tinyMCE.get("content").save())&&(e=jQuery("#content").val()):e=jQuery("#content").text(),e}function moved(){var e=jQuery(".spb_sortable"),t=draggedItem.position(),d=t.top,p=t.top+draggedItem.height(),c=t.left,_=t.left+draggedItem.width();e.not(draggedItem).filter(function(){var e=jQuery(this),t=e.position(),a=t.top,s=t.top+e.height(),l=t.left,n=t.left+e.width(),i=a<=p,r=d<=s,o=l<=_,t=c<=n,a=!1,n=!1,l=c-l,s=s-p,s=Math.abs(s);return l<e.width()&&0<l&&(a=!0),s<e.height()&&0<s&&(n=!0),i&&r&&o&&t&&a&&n}).each(function(){jQuery(this).hasClass("spb_first")&&jQuery(this).removeClass("spb_first")})}function spb_load_top_preloader(){jQuery(".page-builder-switch").after('<div class="spb_top_loader">'+jQuery(".spb-svg-loader.clone").html()+"</div>")}function spb_elements_hide_controls(e){e?(jQuery(".controls_right , .column_size_wrapper").hide(),jQuery(".spb_map_pin .controls_right , .spb_map_pin .column_size_wrapper").show()):jQuery(".controls_right , .column_size_wrapper").show(),jQuery(".spb_top_loader").remove()}function startInitDragging(){var e=0;elements_values_array=[],jQuery(".spb_element_wrapper").each(function(){jQuery(this).attr("data-values-id",e),e++,elements_values_array.push(jQuery(this).children('input[type="hidden"]').detach())}),jQuery("body").addClass("startedDragging")}function endInitDragging(){var e;jQuery(".spb_element_wrapper").each(function(){e=jQuery(this).attr("data-values-id"),jQuery(this).append(elements_values_array[e])}),save_spb_html(),jQuery("body").addClass("startedDragging")}function initDroppable(){jQuery(".spb_sortable_container:not(.not-sortable)").sortable({opacity:.7,connectWith:".spb_sortable_container",placeholder:"widgets-placeholder",delay:200,refreshPositions:!0,tolerance:"intersect",scrollSensitivity:10,scrollspeed:10,cancel:".spb_map_pin, .spb_elem_handles, .el_name_editor",change:function(e,t){t.item.hasClass("spb_row")||t.placeholder.stop().height(24).animate({height:54,duration:"fast",easing:"easeout",opacity:0},300)},start:function(e,t){var a;startInitDragging(),jQuery(".spb_elem_controls").hide(),t.placeholder.css("opacity","0"),t.placeholder.css("width",t.item.width()),t.placeholder.height(t.item.height()),t.item.hasClass("spb_row")&&((a=t.item.find(".spb_sortable_container")).parent().hide(),t.item.find(".controls_right, .spb_elem_controls").hide(),t.placeholder.width(t.item.width()-20),t.placeholder.height(66),t.placeholder.addClass("widgets-placeholder"),a.parent().parent().css("height",66),t.item.parent().find(".spb_row").addClass("spb_sortable_container_dragging")),t.item.find(".controls_right, .spb_elem_controls, .spb_tab_controls").hide(),t.item.hasClass("span12")||t.item.hasClass("spb_last")&&(t.placeholder.removeClass("widgets-placeholder"),t.placeholder.addClass("widgets-placeholder-last")),t.placeholder.css({maxWidth:t.item.width()}),jQuery("#spb_content").addClass("sorting-started"),draggedItem=t.item},receive:function(e,t){jQuery(e.target).parent().parent().hasClass("spb_row"),t.item.hasClass("spb_column")&&0<t.item.parents(".spb_column").length&&jQuery(t.sender).sortable("cancel"),t.item.hasClass("spb_row")&&0<t.item.parents(".spb_row").length&&(jQuery(this).sortable("cancel"),jQuery(t.sender).sortable("cancel")),t.item.hasClass("spb_accordion")&&0<t.item.parents(".spb_tabs").length&&jQuery(t.sender).sortable("cancel"),t.item.hasClass("spb_tabs")&&0<t.item.parents(".spb_accordion").length&&jQuery(t.sender).sortable("cancel")},stop:function(e,t){endInitDragging();var a=t.item.find(".spb_sortable_container");jQuery("body").removeClass("startedDragging"),jQuery("#spb_content").removeClass("sorting-started"),jQuery(window).unbind("mousemove",moved),jQuery.swift_page_builder.addLastClass(".spb_main_sortable"),t.item.parent().find(".spb_row").removeClass("spb_sortable_container_dragging"),a.parent().show(),jQuery(".spb_sortable_container_dragging").addClass("spb_sortable_container").removeClass("spb_sortable_container_dragging"),t.item.hasClass("spb_row")&&(a=t.item.find(".spb_sortable_container")).parent().parent().css("height","100%"),jQuery(".newrowbottom_sortable_element").remove()},update:function(){jQuery.swift_page_builder.save_spb_html(),removeClassProcessedElements()},beforeStop:function(e,t){if(t.item.hasClass("not-column-inherit")&&t.placeholder.parent().hasClass("not-column-inherit")&&t.placeholder.parents(".spb_row").length<=0)return!1}}),jQuery(".spb_column_container").sortable({connectWith:".spb_column_container, .spb_main_sortable",forcePlaceholderSize:!0,placeholder:"widgets-placeholder",cursor:"move",items:"div.spb_sortable",cancel:".spb_gmaps, .el_name_editor",refreshPositions:!0,change:function(e,t){t.item.hasClass("spb_row")||t.placeholder.stop().height(24).animate({height:54,duration:"fast",easing:"easeout",opacity:0},300)},start:function(e,t){startInitDragging(),(t.item.parent().parent().hasClass("spb_tabs_holder")||t.item.parent().parent().parent().parent().hasClass("spb_accordion_holder"))&&t.item.parent().append('<div  class="newrowbottom_sortable_element spb_content_element spb_sortable span12  spb_last spb_first ui-sortable-handle" style="position: relative; opacity: 1; z-index: 0;"></div>'),t.item.closest(".spb_row").find(".spb_element_wrapper").first().find(".spb_column_container").first().append('<div  class="newrowbottom_sortable_element spb_content_element spb_sortable span12  spb_last spb_first ui-sortable-handle" style="position: relative; opacity: 1; z-index: 0;"></div>'),jQuery(".spb_elem_controls").hide(),t.placeholder.css("opacity","0"),t.placeholder.css("width",t.item.width()),t.item.hasClass("span12")||t.item.hasClass("spb_last")&&(t.placeholder.removeClass("widgets-placeholder"),t.placeholder.addClass("widgets-placeholder-last")),t.placeholder.css({maxWidth:t.item.width()})},stop:function(){endInitDragging(),jQuery(".newrowbottom_sortable_element").remove(),jQuery("body").removeClass("startedDragging"),jQuery.swift_page_builder.save_spb_html()}}),jQuery(".spb_main_sortable").droppable({greedy:!0,accept:".dropable_el, .dropable_column",drop:function(e,t){getElementMarkup(jQuery(this),t.draggable,"addLastClass"),jQuery("body").removeClass("startedDragging")}}),jQuery(".spb_row").droppable({greedy:!0,accept:function(e){return!(e.hasClass("spb_row")||e.hasClass("dropable_el")&&jQuery(this).hasClass("ui-droppable")&&e.hasClass("not_dropable_in_third_level_nav"))&&(!(!e.hasClass("dropable_el")&&!e.hasClass("dropable_column"))||void 0)},drop:function(e,t){jQuery(this).parent().removeClass("spb_ui-state-active"),getElementMarkup(jQuery(this),t.draggable,"addLastClass"),spb_elements_hide_controls(!1),jQuery(t.item).removeClass("controls_back"),jQuery("body").removeClass("startedDragging")}}),jQuery(".spb_row").sortable({connectWith:".spb_main_sortable",cancel:".spb_row, .el_name_editor",placeholder:"widgets-placeholder",helper:function(){return jQuery('<div id="itemHelper" class="spb_content_element spb_sortable sortable_1st_level span4 spb_first spb_last"><div class="controls sidebar-name"> <div class="column_size_wrapper" style="display: none;"></div></div><div class="spb_element_wrapper"></div></div>').appendTo("body")},cursor:"move",start:function(e,t){t.helper.addClass(t.item.attr("data-element_type")),t.helper.width(230),t.helper.height(104),t.helper.css({minHeight:104}),t.helper.find(".spb_element_wrapper").addClass(t.item.attr("data-element_type")+"_helper"),t.item.hasClass("span12")?t.placeholder.css({maxWidth:t.item.width()}):t.placeholder.css({maxWidth:t.item.width()/100*85}),jQuery("#spb_content").addClass("sorting-started"),jQuery(".spb_row").addClass("sorting-started"),draggedItem=t.item,jQuery("body").addClass("startedDragging")},stop:function(){endInitDragging(),jQuery("#spb_content").removeClass("sorting-started"),jQuery(".spb_row").removeClass("sorting-started"),jQuery.swift_page_builder.addLastClass(".spb_main_sortable"),jQuery("body").removeClass("startedDragging")},items:"div.spb_sortable:not(.spb_row)",update:function(){jQuery.swift_page_builder.save_spb_html(),removeClassProcessedElements()}}),jQuery(".spb_column_container").droppable({greedy:!0,accept:function(e){return!(e.hasClass("spb_accordion_nav")&&0<jQuery(this).parents(".spb_tabs").length)&&(!(e.hasClass("dropable_el")&&jQuery(this).hasClass("ui-droppable")&&e.hasClass("not_dropable_in_third_level_nav"))&&(!0===e.hasClass("dropable_el")||!(0<jQuery(this).parents(".spb_column").length&&e.hasClass("dropable_column"))&&(!!(0<jQuery(this).parents(".spb_row").length&&e.hasClass("dropable_column"))||void 0)))},drop:function(e,t){jQuery(this).parent().removeClass("spb_ui-state-active"),getElementMarkup(jQuery(this),t.draggable,"addLastClass"),spb_elements_hide_controls(!1),jQuery(t.item).removeClass("controls_back"),jQuery("body").removeClass("startedDragging")}}),jQuery(".newtop_sortable_element").droppable({greedy:!0,accept:".dropable_el, .dropable_column, .spb_sortable",hoverClass:"topelementover",zIndex:99999999,drop:function(e,t){return getElementMarkup(jQuery(".main_wrapper"),t.draggable,"topElement"),jQuery(t.item).removeClass("controls_back"),!1}}),jQuery(".new_sortable_element").droppable({greedy:!0,accept:".dropable_el, .dropable_column",hoverClass:"topelementover",zIndex:99999999,drop:function(e,t){jQuery(this).hasClass("new_sortable_element")?getElementMarkup(jQuery(this),t.draggable,"newElementDrop"):getElementMarkup(jQuery(this),t.draggable,"newRowElementDrop"),jQuery(".newtop_sortable_element").remove(),jQuery(".new_sortable_element").remove(),jQuery(".newrowtop_sortable_element").remove(),jQuery(".newrow_sortable_element").remove(),jQuery.swift_page_builder.save_spb_html()}}),jQuery(".spb_sortable").not(".spb_row, .spb_map_pin, .spb_multilayer_parallax_layer, .spb-dont-resize").resizable({helper:"marker",handles:"e",start:function(e,t){jQuery(t.helper).width(t.originalSize.width)},resize:function(e,t){var a,s=t.element.parent().parent().parent(),l=0,n=0,i=0,r=0,o=0,d=jQuery(".metabox-builder-content");s.hasClass("spb_row")&&!s.hasClass("spb_column")?(o=r=28,i=38):s.hasClass("spb_column")?(o=r=25,d=s,i=50):s.parent().parent().parent().hasClass("spb_accordion")?(d=s,i=o=r=25):s.hasClass("spb_tabs")||s.hasClass("spb_tour")?(r=40,jQuery(t.helper).height(64)):(s.parent().hasClass("spb_tabs")||s.parent().hasClass("spb_tour"))&&(r=25,d=s,i=0),a=Math.round((d.width()-r)/6),l=parseInt(t.helper.width()/(d.width()-o)*100).toString(),jQuery(this).resizable("option","maxWidth",d.width()-i),jQuery(t.helper).find(".width-helper").remove(),88<=l&&l<=100&&(l="1/1 ",percentageClass="span12",n="12"),70<=l&&l<88&&(l="3/4 ",percentageClass="span9",n="9"),60<=l&&l<70&&(l="2/3 ",percentageClass="span8",n="8"),42<=l&&l<60&&(l="1/2 ",percentageClass="span6",n="6"),29<=l&&l<42&&(l="1/3 ",percentageClass="span4",n="4"),20<=l&&l<29&&(l="1/4 ",percentageClass="span3",n="3"),l<20&&(l="1/6 ",percentageClass="span2",n="2"),t.element.hasClass("spb_column")&&t.element.find(".col_sm").attr("value",n),jQuery(t.helper).append('<div  class="width-helper" style="font-size:25px;width:100%;height:100%;text-align:right;float:right;margin-right:30px;margin-top:20px;"> '+l+" Width </div>"),jQuery(this).resizable("option","minWidth",a)},stop:function(e,t){jQuery("body").removeClass("startedDragging"),t.element.hasClass("spb_text_block")?setTimeout(function(){t.element.css("height",t.element.find(".spb_element_wrapper").height()+30)},50):t.element.hasClass("spb_column")?setTimeout(function(){t.element.css("height","100%")},50):t.element.css("height",t.originalSize.height);var a=jQuery(this).closest(".spb_sortable");jQuery(this).queue(function(){var e=getColumnSize(a);t.element.css({width:""}),save_spb_html(),a.removeClass(e[0]).addClass(percentageClass),save_spb_html(),jQuery(this).dequeue()})}}),jQuery("#spb-option-slideout").draggable({greedy:!0,hoverClass:"",zIndex:99999999}),jQuery(".newrowtop_sortable_element,  .newrow_sortable_element").droppable({greedy:!0,accept:function(e){return!!e.hasClass("dropable_el")||!(0<jQuery(this).parents(".spb_column").length&&e.hasClass("dropable_column"))&&(!!(0<jQuery(this).parents(".spb_row").length&&e.hasClass("dropable_column"))||void 0)},hoverClass:"topelementover",zIndex:99999999,drop:function(e,t){jQuery(this).hasClass("new_sortable_element")?getElementMarkup(jQuery(this),t.draggable,"newElementDrop"):getElementMarkup(jQuery(this),t.draggable,"newRowElementDrop"),jQuery(".newtop_sortable_element").remove(),jQuery(".new_sortable_element").remove(),jQuery(".newrowtop_sortable_element").remove(),jQuery(".newrow_sortable_element").remove(),jQuery.swift_page_builder.save_spb_html()}})}function getElementMarkup(s,e,l){e={action:"spb_get_element_backend_html",element:e.attr("id"),data_element:e.attr("data-element"),data_width:e.attr("data-width")};spb_load_top_preloader(),jQuery.post(ajaxurl,e,function(e){s.removeClass("empty_column");var t,a=1;"topElement"==l?jQuery(s).prepend(e).find(".spb_init_callback").each(function(){var e=window[jQuery(this).attr("value")];"function"==typeof e&&e(jQuery(this).closest(".spb_content_element").removeClass("empty_column"))}):"newElementDrop"==l?jQuery(".sortable_1st_level").each(function(){jQuery(this).parent().hasClass("spb_main_sortable")&&jQuery(this).hasClass("spb_last")&&(parseInt(jQuery(s).attr("datael-position"))==a&&(jQuery(this).hasClass("spb_row")?jQuery(s).hasClass("newrowtop_sortable_element")?jQuery(this).find(".spb_column_container").prepend(e):jQuery(s).hasClass("new_sortable_element")?jQuery(this).after(e):jQuery(this).find(".spb_column_container").append(e):jQuery(this).after(e),jQuery(".main_wrapper").find(".spb_init_callback").each(function(){var e=window[jQuery(this).attr("value")];"function"==typeof e&&e(jQuery(this).closest(".spb_content_element").removeClass("empty_column"))})),a++)}):"newRowElementDrop"==l?jQuery(s).hasClass("newrowtop_sortable_element")?jQuery(".spb_row .spb_column_container").each(function(){jQuery(this).hasClass(jQuery(s).attr("datael-class"))&&jQuery(this).prepend(e)}):jQuery(".spb_row").find(".spb_sortable").each(function(){parseInt(jQuery(s).attr("datael-position"))==a&&jQuery(".spb_row_"+a).after(e),a++}):(t=!0,(s.parent().hasClass("spb_tabs_holder")||s.parent().parent().parent().hasClass("spb_accordion_holder"))&&(0<e.indexOf("spb_row")||0<e.indexOf("spb_tabs")||0<e.indexOf("spb_accordion"))&&(t=!1,Materialize.toast(sfTranslatedText.attr("data-spb-error-row-add"),2e3)),1==t&&(jQuery(s).append(e).find(".spb_init_callback").each(function(){var e=window[jQuery(this).attr("value")];"function"==typeof e&&e(jQuery(this).closest(".spb_content_element").removeClass("empty_column"))}),(s.parent().hasClass("spb_tabs_holder")||s.parent().parent().parent().hasClass("spb_accordion_holder"))&&jQuery(s).find(".container-helper, .tabs_expanded_helper, .ui-resizable-handle").last().detach().appendTo(s))),jQuery.swift_page_builder.isMainContainerEmpty(),jQuery(".spb_sortable").removeClass("spb_row_1"),jQuery(".spb_sortable").removeClass("spb_row_2"),jQuery(".spb_sortable").removeClass("spb_row_3"),jQuery(".spb_sortable").removeClass("spb_row_4"),jQuery(".spb_sortable").removeClass("spb_row_5"),jQuery(".spb_sortable").removeClass("spb_row_6"),jQuery(".spb_sortable").removeClass("spb_row_7"),jQuery(".spb_sortable").removeClass("spb_row_8"),jQuery(".spb_sortable").removeClass("spb_row_9"),jQuery(".spb_sortable").removeClass("spb_row_10"),jQuery(".spb_sortable").removeClass("row_top_1"),jQuery(".spb_sortable").removeClass("row_top_2"),jQuery(".spb_sortable").removeClass("row_top_3"),jQuery(".spb_sortable").removeClass("row_top_4"),jQuery(".spb_sortable").removeClass("row_top_5"),initDroppable(),save_spb_html(),spb_elements_hide_controls(!0)})}function columnControls(){jQuery(document).on("click","#spb .column_delete",function(e){e.preventDefault();e='<div class="modal_wrapper"><a class="waves-effect waves-light btn modal-trigger" href="#modal-delete">Modal</a><div id="modal1" class="modal modal_spb"><div class="modal-content">';e+="<h4>"+sfTranslatedText.attr("data-spb-delete-element-header")+'</h4><div class="row"> <div class="input-field delete-block col s12"><label>'+sfTranslatedText.attr("data-spb-delete-element-header")+"</label>",e+='</div></div><div class="modal-footer modal-delete-element"><a href="#!" class=" modal-action spb-modal-close waves-effect modal-ok-button btn-flat">OK</a><a href="#!" class=" modal-action spb-modal-close waves-effect modal-cancel-button btn-flat">Cancel</a></div></div></div></div>',jQuery("#spb").append(e),jQuery("#modal1").openModal(),jQuery("#modal1 .modal-ok-button").focus(),deletedElement=jQuery(this)}),jQuery(document).on("click",".controls_right .column_minimize",function(e){e.preventDefault(),jQuery(this).parent().parent().next().hide(),jQuery(this).next().show(),jQuery(this).hide(),jQuery(this).parent().parent().next().find(".minimize_row").val("yes"),save_spb_html()}),jQuery(document).on("click",".controls_right .column_maximize",function(e){e.preventDefault(),jQuery(this).parent().parent().next().show(),jQuery(this).prev().show(),jQuery(this).hide(),jQuery(this).parent().parent().next().find(".minimize_row").val("no"),save_spb_html()}),jQuery(document).on("click",".controls_right .column_clone, .spb_elem_controls .column_clone, .spb_accordion .column_clone, .spb_tab_controls .column_clone, .row_controls .column_clone",function(e){e.preventDefault();var e=jQuery(this).closest(".spb_sortable"),t=e.clone();t.find(".spb_element_wrapper").removeClass("over_element_wrapper"),t.insertAfter(e).hide().fadeIn(),t.hasClass("spb_tabs")&&t.find(".ui-tabs-nav span").each(function(){updateTabTitleIds(jQuery(this).text())}),t.find(".controls_right , .column_size_wrapper, .spb_elem_controls").hide(),t.find(".ui-resizable-handle").remove(),t.find(".spb_initialized").removeClass("spb_initialized"),t.find(".spb_init_callback").each(function(){var e=window[jQuery(this).attr("value")];"function"==typeof e&&e(t)}),save_spb_html(),initDroppable(),savePbHistory(t.attr("data-element_type"),t.find(".el_name_holder").attr("data_default_name"),"Cloned")}),jQuery(document).on("click",".spb_sortable .spb_sortable .column_popup",function(e){e.preventDefault(),confirm("Press OK to pop (move) section to the top level, Cancel to leave")&&(jQuery(this).closest(".spb_sortable").appendTo(".spb_main_sortable"),initDroppable(),save_spb_html())}),jQuery(document).on("click","#spb .column_edit, #spb .column_edit_trigger",function(e){e.preventDefault(),showEditForm(jQuery(this).closest(".spb_sortable"))}),jQuery(".column_increase").on("click",function(e){e.preventDefault();var t=jQuery(this).closest(".spb_sortable"),e=getColumnSize(t);e[1]&&(t.removeClass(e[0]).addClass(e[1]),e=getColumnSize(t),jQuery(t).find(".column_size:first").html(e[3]),save_spb_html())}),jQuery(".column_decrease").on("click",function(e){e.preventDefault();var t=jQuery(this).closest(".spb_sortable"),e=getColumnSize(t);e[2]&&(t.removeClass(e[0]).addClass(e[2]),e=getColumnSize(t),jQuery(t).find(".column_size:first").html(e[3]),save_spb_html())})}function removeClassProcessedElements(){jQuery(".spb_sortable").removeClass("spb_element_processed")}function showEditSmallForm(e){var t="",a="",s="";return jQuery("body").hasClass("edited-form-element")||(e.parent().addClass("edited-form-element"),a=e.parent().parent().hasClass("ui-tabs-nav")?(t=e.parent().find("span").text(),"Tabs"):(t=e.parent().find(".title-text").text(),"Accordion"),e.parent().attr("data-title-icon")&&(s=e.parent().attr("data-title-icon")),jQuery("body").find("edit-small-modal").length<=0&&(e=jQuery(".spb-svg-loader.clone").html(),jQuery("#spb_edit_form").html('<div class="spb-loading-message">'+e+'<div class="loading_text">'+jQuery("#spb_loading").val()+"</div></div>").show().css({"padding-top":60}),jQuery.post(ajaxurl,{action:"spb_show_small_edit_form",element_name:a,tab_name:t,icon:s},function(e){jQuery(".spb-modal-tabs").html(e),jQuery(".spb-modal-tabs").show(),jQuery("#spb_edit_form").html("")}))),!1}function updateTabTitleIds(e){var t,a=e.replace(/[^A-Za-z0-9\-_]/g,"");1<jQuery('.ui-tabs-nav span:contains("'+e+'")').length?jQuery('.ui-tabs-nav span:contains("'+e+'")').each(function(e){t=0===e?jQuery.trim(a):jQuery.trim(a)+"-"+e,jQuery(this).parent().parent().attr("id",t)}):jQuery('.ui-tabs-nav span:contains("'+e+'")').parent().parent().attr("id",a)}function updateAccordionTitleIds(e){var t,a=e.toLowerCase().replace(/[^A-Za-z0-9\-_]/g,"-");1<jQuery('.ui-accordion-header .title-text:contains("'+e+'")').length?jQuery('.ui-accordion-header .title-text:contains("'+e+'")').each(function(e){t=0===e?jQuery.trim(a):jQuery.trim(a)+"-"+e,jQuery(this).parent().attr("accordion_id",t)}):jQuery('.ui-accordion-header .title-text:contains("'+e+'")').parent().attr("accordion_id",a)}function saveSmallFormEditing(){var e=jQuery(".edited-form-element"),t=jQuery(".small_form_title").val();return(e.parent().hasClass("ui-tabs-nav")?e.find("span").first():e.find(".title-text")).text(t),e.attr("data-title-icon",jQuery(".small_form_icon").val()),(e.hasClass("ui-accordion-header")?updateAccordionTitleIds:updateTabTitleIds)(t),e.removeClass("edited-form-element"),jQuery(".spb-modal-tabs").html(""),jQuery(".spb-modal-tabs").hide(),jQuery("#spb_edit_form").hide(),jQuery("body").css("overflow",""),Materialize.toast(sfTranslatedText.attr("data-spb-saved-element"),2e3),save_spb_html(),!1}function detailedControls(e){e.is(":checked")?(jQuery(" #spb .css-detailed-controls, .spb_edit_wrap .lb_css_field").hide(),jQuery(" #spb .design_tab .lb_uislider").parent().show(),jQuery("#spb_edit_form .custom-padding-top").val()==jQuery("#spb_edit_form .custom-padding-bottom").val()&&jQuery("#padding_vertical_val").val(Math.round(jQuery("#spb_edit_form .custom-padding-bottom").val())),jQuery("#spb_edit_form .custom-padding-left").val()==jQuery("#spb_edit_form .custom-padding-right").val()&&jQuery("#padding_horizontal_val").val(Math.round(jQuery("#spb_edit_form .custom-padding-left").val())),jQuery("#spb_edit_form .custom-margin-top").val()==jQuery("#spb_edit_form .custom-margin-bottom").val()&&jQuery("#margin_vertical_val").val(Math.round(jQuery("#spb_edit_form .custom-margin-bottom").val())),jQuery("#spb_edit_form .custom_css_percentage").trigger("change")):(jQuery(" #spb .css-detailed-controls, .spb_edit_wrap .lb_css_field").show(),jQuery(" #spb .design_tab .lb_uislider").parent().hide())}function showEditForm(t){var e=generateShortcodesFromHtml(t,!0),a=t.attr("data-element_type");jQuery("body").css("overflow","hidden"),jQuery("#spb_edit_form").css({opacity:1});var s=jQuery(".spb-svg-loader.clone").html();jQuery("#spb_edit_form").html('<div class="spb-loading-message">'+s+'<div class="loading_text">'+jQuery("#spb_loading").val()+"</div></div>").show().css({"padding-top":60}),jQuery.post(ajaxurl,{action:"spb_show_edit_form",element:a,shortcode:e},function(e){jQuery("#spb_edit_form").html(e).css({"padding-top":0,opacity:1}),jQuery.swift_page_builder.initializeFormEditing(t),jQuery(".tooltipped").tooltip({delay:0}),jQuery(".spb_edit_form_elements").resizable({handles:"e",create:function(){jQuery(".ui-resizable-e").css("cursor","ew-resize")}}).draggable({cancel:".spb_edit_wrap",delay:300}),jQuery(".textfield").each(function(){var e=jQuery(this),t=e.next("label");e.val()&&!t.hasClass("active")&&t.addClass("active")}),jQuery("#spb .edit_form_line").find(".simplified_controls").each(function(){detailedControls(jQuery(this))}),jQuery("#spb .edit_form_line").find("select").not(".disabled").material_select(),jQuery(".icon_section_holder, .pricing_column_holder").find("select").not(".disabled").material_select(),jQuery(".collapsible").collapsible({accordion:!1}),check_form_dependency_fields(),jQuery(".icon_section_holder, .pricing_column_holder, .pricing_column_feature_holder").sortable({connectWith:".section_repeater",placeholder:"widgets-placeholder",opacity:.8,tolerance:"intersect",cursor:"move",handle:".icon-drag-handle",cancel:".right_bottom_section",start:function(e,t){t.placeholder.css("opacity","0")},change:function(e,t){t.placeholder.stop().height(24).animate({height:74,duration:"fast",easing:"easeout",opacity:0},200)}}),"spb_text_block"==t.attr("data-element_type")&&(e=t.find(".content").is("[data-form-content]")?t.find(".content").attr("data-form-content"):jQuery(".spb_edit_form_elements .form_content").val(),jQuery(".spb_edit_form_elements #form_content").parent().parent().parent().hide(),void 0!==e&&0<=e.indexOf("</form>")&&tinyMCE.activeEditor.setContent(e)),jQuery("#spb .edit_form_line").find("select").not(".disabled").trigger("contentChanged"),jQuery(".sf-close-delete-file").on("click",function(e){return e.preventDefault(),jQuery(this).parent().parent().remove(),jQuery(".sf_gallery_widget_attached_images_ids").val(""),!1})})}function saveFormEditing(x){jQuery("#publish").show(),jQuery(".spb_main_sortable, #spb-elements, .spb_switch-to-builder").show(),removeClassProcessedElements();var e=x.find(".el_name_holder").text(),t=x.find(".el_name_holder").first().text();""===e&&(e=x.find(".element_name").val());var a,s,l,n,i,r=!!x.hasClass("spb_map_pin");x.hasClass("spb_section")&&x.find(".page-name-holder").empty(),"spb_text_block"==x.attr("data-element_type")&&(a=(l=tinyMCE.activeEditor.getContent()).indexOf("<form"),s=l.indexOf("</form>"),0<=a&&(e=l.substr(a,s+=7-a).replace(/"/g,"'"),l=l.substr(0,a)+e+l.substr(a+s,l.length),jQuery(".spb_edit_form_elements .form_content").val(l))),jQuery("#spb_edit_form .spb_param_value").each(function(){var e,t,a,s,l,n,i,r,o,d,p,c,_,u,m,b,h,v,f,y,g,j,Q=jQuery(this).attr("name"),w="",C="";jQuery(this).hasClass("icon_section_holder")&&(Q="content",jQuery(this).find(".section_repeater").each(function(){var e=jQuery(this).find(".section_icon_image i").attr("class");"svg-icon-picker-item"===e&&(e=jQuery(this).find(".section_icon_image i").data("path"));var t=jQuery(this).find(".icon_title").val(),a=jQuery(this).find(".icon_link").val(),s=jQuery(this).find(".icon_target").val();C+='[spb_icon_box_grid_element title="'+t+'" target="'+s+'" link="'+a+'" icon="'+e+'"][/spb_icon_box_grid_element]'}),w=C),"custom_css"==Q&&(e=[],t=jQuery("#spb_edit_form .custom_css_percentage").is(":checked")?"%":"px",a=jQuery("#spb_edit_form .custom-margin-top").val(),s=jQuery("#spb_edit_form .custom-margin-left").val(),l=jQuery("#spb_edit_form .custom-margin-right").val(),n=jQuery("#spb_edit_form .custom-margin-bottom").val(),i=jQuery("#spb_edit_form .custom-border-top").val(),r=jQuery("#spb_edit_form .custom-border-left").val(),o=jQuery("#spb_edit_form .custom-border-right").val(),d=jQuery("#spb_edit_form .custom-border-bottom").val(),p=jQuery("#spb_edit_form .custom-padding-top").val(),c=jQuery("#spb_edit_form .custom-padding-left").val(),_=jQuery("#spb_edit_form .custom-padding-right").val(),u=jQuery("#spb_edit_form .custom-padding-bottom").val(),m=jQuery("#spb_edit_form .border_color_global").val(),b=jQuery("#spb_edit_form .border_styling_global").find("select").val(),h=jQuery("#spb_edit_form .back_color_global").val(),"default"==b&&(b=""),void 0!==a&&""!=a&&e.push("margin-top: "+a+t+";"),void 0!==s&&""!=s&&e.push("margin-left: "+s+t+";"),void 0!==l&&""!=l&&e.push("margin-right: "+l+t+";"),void 0!==n&&""!=n&&e.push("margin-bottom: "+n+t+";"),void 0!==i&&""!=i&&0<i&&e.push("border-top: "+i+"px "+b+" "+m+";"),void 0!==r&&""!=r&&0<r&&e.push("border-left: "+r+"px "+b+" "+m+";"),void 0!==o&&""!=o&&0<o&&e.push("border-right: "+o+"px "+b+" "+m+";"),void 0!==d&&""!=d&&0<d&&e.push("border-bottom: "+d+"px "+b+" "+m+";"),void 0!==p&&""!=p&&0<p&&e.push("padding-top: "+p+t+";"),void 0!==c&&""!=c&&0<c&&e.push("padding-left: "+c+t+";"),void 0!==_&&""!=_&&0<_&&e.push("padding-right: "+_+t+";"),void 0!==u&&""!=u&&0<u&&e.push("padding-bottom: "+u+t+";"),e=e.join(""),""!=h&&null!=h&&(e+="background-color:"+h+";"),jQuery(this).val(e)),jQuery(this).hasClass("pricing_column_holder")&&(v=C="",Q="content",jQuery(this).find(".section_repeater").each(function(){var e=jQuery(this).find(".plan_name").val(),t=jQuery(this).find(".plan_highlight_column").find("select").val(),a=jQuery(this).find(".plan_price").val(),s=jQuery(this).find(".plan_period").val(),l=jQuery(this).find(".plan_button_text").val(),n=jQuery(this).find(".plan_link_url").val(),i=jQuery(this).find(".plan_link_target").find("select").val(),r=jQuery(this).find(".plan_extra_class").val();v="",jQuery(this).parent().find(".section_repeater_features").each(function(){var e=jQuery(this).find(".plan_feature_name").val(),t=jQuery(this).find(".feature_el_class").val();v+='[spb_pricing_column_feature feature_name="'+e+'" el_class="'+t+'"] [/spb_pricing_column_feature]'}),C+='[spb_pricing_column name="'+e+'" highlight_column="'+t+'" price="'+a+'"',C+=' period="'+s+'" btn_text="'+l+'" href="'+n+'" target="'+i+'" el_class="'+r+'" ]'+v+"[/spb_pricing_column]"}),w=C),"spb_row"!=x.attr("data-element_type")&&"spb_column"!=x.attr("data-element_type")?("element_name"===Q&&""!==jQuery(this).val()&&x.find(".el_name_holder").first().html(jQuery(this).val()),"element_name"===Q&&""===jQuery(this).val()&&x.find(".el_name_holder").first().html(x.find(".el_name_holder").attr("data_default_name"))):"element_name"===Q&&""!==jQuery(this).val()&&x.find(".asset-name").first().html(jQuery(this).val()),jQuery(this).hasClass("textfield")&&(w=jQuery(this).val()),jQuery(this).hasClass("textfield_html")?(w=jQuery(this).val(),x.find("[name="+Q+"_code]").val(base64_encode(rawurlencode(w))),w=jQuery("<div/>").text(w).html()):jQuery(this).hasClass("colorpicker")||jQuery(this).hasClass("uislider")||jQuery(this).hasClass("icon-picker")?w=jQuery(this).val():jQuery(this).hasClass("buttonset")?(w=jQuery(this).val(),w=jQuery(this).is(":checked")?jQuery(this).attr("data-value-on"):jQuery(this).attr("data-value-off")):jQuery(this).hasClass("dropdown")||jQuery(this).hasClass("dropdown-id")?void 0===Q&&(w=jQuery(this).find("select").val(),Q=jQuery(this).find("select").attr("name"),(0<jQuery(this).find(".responsive_vis").length||0<jQuery(this).find(".row_responsive_vis").length||0<jQuery(this).find(".col_responsive_vis").length)&&(y=(x.hasClass("spb_blank_spacer")||x.hasClass("spb_column")?x:x.parent().parent()).find(".responsive-vis-indicator > .icons").first(),"hidden-lg_hidden-md"===w?y.html('<a href="#" class="tooltipped" data-position="bottom" data-delay="50" data-tooltip="Hidden on Desktop"><i class="icon-vis-desktop hidden_vis"></i><i class="icon-vis-tablet"></i><i class="icon-vis-phone"></i></a>'):"hidden-sm"===w?y.html('<a href="#" class="tooltipped" data-position="bottom" data-delay="50" data-tooltip="Hidden on Tablet"><i class="icon-vis-desktop"></i><i class="icon-vis-tablet hidden_vis"></i><i class="icon-vis-phone"></i></a>'):"hidden-lg_hidden-md_hidden-sm"===w?y.html('<a href="#" class="tooltipped" data-position="bottom" data-delay="50" data-tooltip="Hidden on Desktop + Tablet"><i class="icon-vis-desktop hidden_vis"></i><i class="icon-vis-tablet hidden_vis"></i><i class="icon-vis-phone"></i></a>'):"hidden-lg_hidden-md_hidden-xs"===w?y.html('<a href="#" class="tooltipped" data-position="bottom" data-delay="50" data-tooltip="Hidden on Desktop + Phone"><i class="icon-vis-desktop hidden_vis"></i><i class="icon-vis-tablet"></i><i class="icon-vis-phone hidden_vis"></i></a>'):"hidden-xs_hidden-sm"===w?y.html('<a href="#" class="tooltipped" data-position="bottom" data-delay="50" data-tooltip="Hidden on Tablet + Phone"><i class="icon-vis-desktop"></i><i class="icon-vis-tablet hidden_vis"></i><i class="icon-vis-phone hidden_vis"></i></a>'):"hidden-xs"===w?y.html('<a href="#" class="tooltipped" data-position="bottom" data-delay="50" data-tooltip="Hidden on Phone"><i class="icon-vis-desktop"></i><i class="icon-vis-tablet"></i><i class="icon-vis-phone hidden_vis"></i></a>'):y.html(""),jQuery(".tooltipped").tooltip({delay:50})),f=[],y="",jQuery(this).find("option").each(function(){var e=jQuery(this).attr("value");f.push(e)}),y=f.join(" "),x.hasClass("spb_gallery")||x.find(".spb_element_wrapper").removeClass(y).addClass(w)):jQuery(this).hasClass("select-multiple")?void 0===Q&&(Q=jQuery(this).find("select").attr("name"),w=jQuery(this).find("input").val()):jQuery(this).hasClass("select-multiple-id")?(void 0===Q&&(j=jQuery(this).find("select").val(),Q=jQuery(this).find("select").attr("name")),j&&(w=j.join(","))):jQuery(this).hasClass("textarea_html")?(""!==(w=getTinyMceHtml(jQuery(this)))&&jQuery(this).hasClass("content")&&0<jQuery(this).closest(".spb_edit_wrap").find(".layer_image").length&&(x.find(".column_edit_trigger").addClass("hide-layer-image"),x.find(".attachment-medium").addClass("hide-layer-img")),""===w&&jQuery(this).hasClass("content")&&0<jQuery(this).closest(".spb_edit_wrap").find(".layer_image").length&&(x.find(".column_edit_trigger").removeClass("hide-layer-image"),x.find(".attachment-medium").removeClass("hide-layer-img"))):jQuery(this).hasClass("spb-checkboxes")?(g=[],jQuery(this).closest(".edit_form_line").find("input").each(function(){var e=jQuery(this);Q=e.attr("name"),e.is(":checked")&&g.push(e.attr("id"))}),0<g.length&&(w=g.join(","))):jQuery(this).hasClass("exploded_textarea")?w=jQuery(this).val().replace(/\n/g,","):jQuery(this).hasClass("textarea")?w=jQuery(this).val():jQuery(this).hasClass("textarea_encoded")?(w=base64_encode(rawurlencode(jQuery(this).val())),x.find("[name="+Q+"_code]").val(w),w=jQuery("<div/>").text(w).html()):jQuery(this).hasClass("textarea_raw_html")?(w=jQuery(this).val(),x.find("[name="+Q+"_code]").val(base64_encode(rawurlencode(w))),w=jQuery("<div/>").text(w).html()):jQuery(this).hasClass("attach_images")?w=jQuery(this).val():jQuery(this).hasClass("attach_image")&&(w=jQuery(this).val(),(j=x.find("[name="+Q+"]").next(".attachment-thumbnail")).attr("src",jQuery(this).parent().find("li.added img").attr("src")),j.attr("srcset",""),""!==w?(j.next().addClass("image-exists"),j.show()):(j.next().removeClass("image-exists"),j.hide())),Q=Q.replace("spb_tinymce_",""),x.find("."+Q).not(".spb_element_wrapper").is("div, h1,h2,h3,h4,h5,h6, span, i, b, strong, button")?(x.find("[name="+Q+"]").html(w),0<=w.indexOf("</form>")?x.find("[name="+Q+"]").attr("data-form-content",w):x.find("[name="+Q+"]").is("[data-form-content]")&&x.find("[name="+Q+"]").removeAttr("data-form-content")):(x.hasClass("spb_row"),x.find("[name="+Q+"]").last().val(w))}),r&&(r=x.find("[name=address]").val(),o=x.find("[name=pin_title]").val(),n=x.find("[name=pin_latitude]"),i=x.find("[name=pin_longitude]"),""!==r?(new google.maps.Geocoder).geocode({address:r},function(e){n.val(e[0].geometry.location.lat()),i.val(e[0].geometry.location.lng())}):x.find("[name=address]").val(jQuery("[name=address]").attr("data-previous-text")),o&&""!==o||(o=15<(o=r).length?o.substring(0,12)+"...":o),jQuery("#"+jQuery(x).parent().attr("aria-labelledby")).find("span").html(o));var o=x.children(".spb_save_callback");1==o.length&&window[o.attr("value")],save_spb_html(),savePbHistory(x.attr("data-element_type"),t,"Edited"),jQuery("#spb_edit_form").html("").hide(),jQuery("body").css("overflow","")}function getTinyMceHtml(t){var a,e=t.attr("id");window.switchEditors.go(e,"tmce");try{a=tinyMCE.get(e).getContent(),4<=tinyMCE.majorVersion?tinyMCE.execCommand("mceRemoveEditor",!0,e):tinyMCE.execCommand("mceRemoveControl",!0,e)}catch(e){a=switchEditors.wpautop(t.val())}return a}function initTinyMce(e){var t=e.attr("id"),a=e.closest("#spb .edit_form_line").find(".spb-textarea.textarea_html");window.tinyMCEPreInit.mceInit[t]=_.extend({},tinyMCEPreInit.mceInit.content,{resize:"vertical",height:200}),_.isUndefined(tinyMCEPreInit.qtInit[t])&&(window.tinyMCEPreInit.qtInit[t]=_.extend({},tinyMCEPreInit.qtInit.replycontent,{id:t})),e.val(a.val()),quicktags(window.tinyMCEPreInit.qtInit[t]),QTags._buttonsInit(),window.switchEditors.go(t,"tmce"),"4"<=tinymce.majorVersion&&tinymce.execCommand("mceAddEditor",!0,t)}function isTinyMceActive(){return"undefined"!=typeof tinyMCE&&tinyMCE.activeEditor&&!tinyMCE.activeEditor.isHidden()}function getColumnSize(e){return e.hasClass("span12")?new Array("span12","span12","span9","1/1"):e.hasClass("span9")?new Array("span9","span12","span8","3/4"):e.hasClass("span8")?new Array("span8","span9","span6","2/3"):e.hasClass("span6")?new Array("span6","span8","span4","1/2"):e.hasClass("span4")?new Array("span4","span6","span3","1/3"):e.hasClass("span3")?new Array("span3","span4","span2","1/4"):!!e.hasClass("span2")&&new Array("span2","span3","span2","1/6")}function save_spb_html(){jQuery.swift_page_builder.addLastClass(jQuery(".spb_main_sortable"));var e=generateShortcodesFromHtml(jQuery(".spb_main_sortable"));removeClassProcessedElements(),!0!==isTinyMceActive()?jQuery("#content").val(e):tinyMCE.get("content")&&tinyMCE.get("content").setContent(e),jQuery.swift_page_builder.isMainContainerEmpty()}function clear_page_builder_content(){var e='<div class="modal_wrapper"><a class="waves-effect waves-light btn modal-trigger" href="#modal-delete">Modal</a><div id="modal-delete-pb-content" class="modal modal_spb"><div class="modal-content">';e+="<h4>"+sfTranslatedText.attr("data-spb-clear-pb-header")+'</h4><div class="row"> <div class="input-field delete-block col s12"><label>'+sfTranslatedText.attr("data-spb-delete-pb-content-question")+"</label>",e+='</div></div><div class="modal-footer modal-delete-page-builder-content"><a href="#!" class=" modal-action spb-modal-close waves-effect modal-ok-button btn-flat">Yes</a><a href="#!" class=" modal-action spb-modal-close waves-effect modal-cancel-button btn-flat">No</a></div></div></div></div>',jQuery("#spb").append(e),jQuery("#modal-delete-pb-content").openModal()}function generateShortcodesFromHtml(e,t){var p,c="";return(t?jQuery(e):jQuery(e).children(".spb_sortable")).each(function(){var e,t,a,s,l=jQuery(this),n=l,i=l.find(".spb_sc_base").val(),r=getColumnSize(l),o="",d="]";l.hasClass("spb_element_processed")||(l.parent().hasClass("spb_column_container")&&l.addClass("spb_element_processed"),l.children(".spb_element_wrapper").children(".spb_param_value").each(function(){var e=jQuery(this).attr("name"),t="",a="";jQuery(this).hasClass("textfield")?a=jQuery(this).is("div, h1,h2,h3,h4,h5,h6, span, i, b, strong")?jQuery(this).html():jQuery(this).is("button")?jQuery(this).text():jQuery(this).val():jQuery(this).hasClass("textfield_html")||jQuery(this).hasClass("colorpicker")||jQuery(this).hasClass("uislider")||jQuery(this).hasClass("buttonset")||jQuery(this).hasClass("icon-picker")||jQuery(this).hasClass("dropdown")||jQuery(this).hasClass("dropdown-id")||jQuery(this).hasClass("select-multiple")||jQuery(this).hasClass("select-multiple-id")||jQuery(this).hasClass("textarea_encoded")?a=jQuery(this).val():jQuery(this).hasClass("textarea_raw_html")&&0===l.children(".spb_sortable").length?(t=jQuery(this).parent().find("."+e+"_code").val(),d="]"+t+"[/"+i+"]"):jQuery(this).hasClass("textarea_html")&&0===l.children(".spb_sortable").length?(t=jQuery(this).html(),d="]"+t+"[/"+i+"]"):jQuery(this).hasClass("posttypes")||jQuery(this).hasClass("exploded_textarea")?a=jQuery(this).val():jQuery(this).hasClass("textarea")?a=jQuery(this).is("div, h1,h2,h3,h4,h5,h6, span, i, b, strong")?jQuery(this).html():jQuery(this).val():(jQuery(this).hasClass("attach_images")||jQuery(this).hasClass("attach_image")||jQuery(this).hasClass("widgetised_sidebars"))&&(a=jQuery(this).val()),""!==(a=jQuery.trim(a))&&(o+=" "+e+'="'+a+'"')}),o+=' width="'+r[3]+'"',(l.hasClass("spb_first")||l.hasClass("spb_last"))&&(e=l.hasClass("spb_first")?"first":"",t=l.hasClass("spb_last")?"last":"",r=l.hasClass("spb_last")&&l.hasClass("spb_first")?" ":"",o+=' el_position="'+e+r+t+'"'),1!=(a=l.children(".spb_shortcode_callback")).length||"function"==typeof(t=window[a.attr("value")])&&(p=t(l)),c+="["+i+o+d+" ",0<l.children(".spb_element_wrapper").find(".spb_column_container").length&&(a=l.children(".spb_shortcode_callback"),s=0,l.children(".spb_element_wrapper").find(".spb_column_container").each(function(){var e,t=generateShortcodesFromHtml(jQuery(this));1!=a.length||jQuery(this).hasClass("map_pin_wrapper")||(e=window[a.attr("value")],(p="function"==typeof e?e(n,s):p)&&(t=" "+p.replace("%inner_shortcodes",t)+" "),s++),'[spb_accordion_tab title=""]  [/spb_accordion_tab]'!=t.trim()&&'[spb_accordion_tab title="" icon=""]  [/spb_accordion_tab]'!=t.trim()&&'[spb_accordion_tab title=""  accordion_id="" icon=""]  [/spb_accordion_tab]'!=t.trim()||(t=""),c+=t}),c+="[/"+i+"] "),jQuery(".spb_column_container").removeClass("converted"))}),c}function spbTabsInitCallBack(e){e.find(".spb_tabs_holder").not(".spb_initialized").each(function(){var t;jQuery(this).addClass("spb_initialized"),(t=jQuery(this).tabs({panelTemplate:'<div class="row-fluid spb_column_container empty_column spb_sortable_container not-column-inherit">'+jQuery("#container-helper-block").html()+"</div>",add:function(){var e=jQuery(this).tabs("length")-1;jQuery(this).tabs("select",e),save_spb_html()}})).find(".ui-tabs-nav").sortable({axis:"x",tolerance:"pointer",scrollSensitivity:10,scrollspeed:10,helper:"clone",opacity:.9,start:function(e,t){t.placeholder.width(t.item.width()),t.helper.width(t.item.width()+20),t.helper.css({"background-color":"#E7E7E7"})},stop:function(){t.find("ul li").each(function(){var e=jQuery(this).find("a").attr("href").replace("#","");t.find("div.spb_column_container#"+e).appendTo(t)}),save_spb_html()}})}),initDroppable()}function spbTabsGenerateShortcodeCallBack(e,t){var a=e.find(".ui-tabs-nav li:eq("+t+") a").text(),s="",l="";return e.find(".ui-tabs-nav li:eq("+t+")").attr("data-title-icon")&&(s=e.find(".ui-tabs-nav li:eq("+t+")").attr("data-title-icon")),e.find(".ui-tabs-nav li:eq("+t+")").attr("id")&&(l=e.find(".ui-tabs-nav li:eq("+t+")").attr("id")),null===t?"":'[spb_tab title="'+a+'" icon="'+s+'" id="'+l+'"] %inner_shortcodes [/spb_tab]'}function spbAccordionInitCallBack(e){e.find(".spb_accordion_holder").not(".spb_initialized").each(function(){jQuery(this).addClass("spb_initialized"),jQuery(this).accordion({header:"> div > h3",autoHeight:!0,heightStyle:"content"}).sortable({axis:"y",handle:"h3",stop:function(e,t){t.item.children("h3").triggerHandler("focusout"),save_spb_html()}}),jQuery(document).on("click",".spb_accordion_holder .edit_tab",function(){return showEditSmallForm(jQuery(this)),!1})}),initDroppable()}function spbAccordionGenerateShortcodeCallBack(e,t){var a="",s="",l=e.find(".group:eq("+t+") > h3").text();return e.find(".group:eq("+t+") > h3").attr("data-title-icon")&&(a=e.find(".group:eq("+t+") > h3").attr("data-title-icon")),'[spb_accordion_tab title="'+l+'" accordion_id="'+(s=e.find(".group:eq("+t+") > h3").attr("accordion_id")?e.find(".group:eq("+t+") > h3").attr("accordion_id"):s)+'" icon="'+a+'"] %inner_shortcodes [/spb_accordion_tab]'}function spbMessageInitCallBack(e){var t=e.find(".spb_param_value.color"),e=t.val();t.closest(".spb_element_wrapper").addClass(e)}function spbTextSeparatorInitCallBack(e){var t=e.find(".spb_param_value.title_align"),e=t.val();t.closest(".spb_element_wrapper").addClass(e)}function getURLVars(){for(var e,t=[],a=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),s=0;s<a.length;s++)e=a[s].split("="),t.push(e[0]),t[e[0]]=e[1];return t}function rawurldecode(e){return decodeURIComponent(e+"")}function rawurlencode(e){return e=(e+"").toString(),encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function base64_decode(e){var t,a,s,l,n,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r=0,o=0,d=[];if(!e)return e;for(e+="";t=(n=i.indexOf(e.charAt(r++))<<18|i.indexOf(e.charAt(r++))<<12|(s=i.indexOf(e.charAt(r++)))<<6|(l=i.indexOf(e.charAt(r++))))>>16&255,a=n>>8&255,n=255&n,d[o++]=64==s?String.fromCharCode(t):64==l?String.fromCharCode(t,a):String.fromCharCode(t,a,n),r<e.length;);return utf8_decode(d.join(""))}function base64_encode(e){var t,a,s,l,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i=0,r=0,o="",d=[];if(!e)return e;for(e=utf8_encode(e+"");t=(l=e.charCodeAt(i++)<<16|e.charCodeAt(i++)<<8|e.charCodeAt(i++))>>12&63,a=l>>6&63,s=63&l,d[r++]=n.charAt(l>>18&63)+n.charAt(t)+n.charAt(a)+n.charAt(s),i<e.length;);var o=d.join(""),p=e.length%3;return(p?o.slice(0,p-3):o)+"===".slice(p||3)}function utf8_decode(e){var t,a,s=[],l=0,n=0,i=0;for(e+="";l<e.length;)(t=e.charCodeAt(l))<128?(s[n++]=String.fromCharCode(t),l++):191<t&&t<224?(i=e.charCodeAt(l+1),s[n++]=String.fromCharCode((31&t)<<6|63&i),l+=2):(i=e.charCodeAt(l+1),a=e.charCodeAt(l+2),s[n++]=String.fromCharCode((15&t)<<12|(63&i)<<6|63&a),l+=3);return s.join("")}function stripslashes(e){return(e+"").replace(/\\(.?)/g,function(e,t){switch(t){case"\\":return"\\";case"0":return"\0";case"":return"";default:return t}})}function utf8_encode(e){if(null==e)return"";for(var t,a=e+"",s="",l=t=0,n=a.length,i=0;i<n;i++){var r=a.charCodeAt(i),o=null;r<128?t++:o=127<r&&r<2048?String.fromCharCode(r>>6|192)+String.fromCharCode(63&r|128):String.fromCharCode(r>>12|224)+String.fromCharCode(r>>6&63|128)+String.fromCharCode(63&r|128),null!==o&&(l<t&&(s+=a.slice(l,t)),s+=o,l=t=i+1)}return l<t&&(s+=a.slice(l,n)),s}